[ãƒ›ãƒ¼ãƒ ](../../README.md) > [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../README.md) > [ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†ã‚¬ã‚¤ãƒ‰](README.md) > 07 Advanced

---

## 7. é«˜åº¦ãªãƒˆãƒ”ãƒƒã‚¯

ã“ã®ç« ã§ã¯ã€ä¸Šç´šè€…å‘ã‘ã®é«˜åº¦ãªæ´»ç”¨æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚

---

### 7.1 ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æœ€é©åŒ–æˆ¦ç•¥

#### 7.1.1 ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹çŽ‡ã®å‘ä¸Š

#### æˆ¦ç•¥1: ãƒ•ã‚¡ã‚¤ãƒ«ã®åœ§ç¸®æŠ€è¡“

**ç›®çš„**: åŒã˜æƒ…å ±ã‚’ã‚ˆã‚Šå°‘ãªã„ãƒˆãƒ¼ã‚¯ãƒ³ã§è¡¨ç¾

**æ‰‹æ³•1: å†—é•·ãªèª¬æ˜Žã®å‰Šé™¤**

ðŸ“ **æœ€é©åŒ–å‰**:
```markdown
# APIè¨­è¨ˆè¦ç´„

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã§ä¸€è²«ã—ãŸAPIè¨­è¨ˆã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã™ã€‚
ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦APIã‚’è¨­è¨ˆã—ã¦ãã ã•ã„ã€‚

## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½åè¦å‰‡

ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‘½åã«ã¯ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã—ã¾ã™ã€‚
ãƒªã‚½ãƒ¼ã‚¹ã¯å¿…ãšè¤‡æ•°å½¢ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚½ãƒ¼ã‚¹ã®å ´åˆã¯`/users`ã¨ã—ã¾ã™ã€‚
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:
```markdown
# APIè¨­è¨ˆè¦ç´„

## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½å
- ãƒªã‚½ãƒ¼ã‚¹: è¤‡æ•°å½¢ï¼ˆä¾‹: `/users`ï¼‰
- ID: å˜æ•°å½¢ï¼ˆä¾‹: `/users/{userId}`ï¼‰
```

**å‰Šæ¸›**: ç´„200ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„50ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ75%å‰Šæ¸›ï¼‰

**æ‰‹æ³•2: ç®‡æ¡æ›¸ãã®æ´»ç”¨**

ðŸ“ **æœ€é©åŒ–å‰**:
```markdown
é–¢æ•°ã«ã¯å¿…ãšJSDocã‚’è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚JSDocã«ã¯é–¢æ•°ã®èª¬æ˜Žã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜Žã€æˆ»ã‚Šå€¤ã®èª¬æ˜Žã€ä¾‹å¤–ã®èª¬æ˜Žã‚’å«ã‚ã¦ãã ã•ã„ã€‚
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:
```markdown
é–¢æ•°ã®JSDoc:
- èª¬æ˜Ž
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- æˆ»ã‚Šå€¤
- ä¾‹å¤–
```

**å‰Šæ¸›**: ç´„80ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„30ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ62.5%å‰Šæ¸›ï¼‰

**æ‰‹æ³•3: è¡¨ã®æ´»ç”¨**

ðŸ“ **æœ€é©åŒ–å‰**:
```markdown
å¤‰æ•°ã¯camelCaseã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹: userName, orderTotal
é–¢æ•°ã¯camelCaseã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹: getUserById, calculateTotal
ã‚¯ãƒ©ã‚¹ã¯PascalCaseã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹: UserService, OrderController
å®šæ•°ã¯UPPER_SNAKE_CASEã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä¾‹: MAX_RETRY_COUNT, API_BASE_URL
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:
```markdown
| ç¨®é¡ž | å½¢å¼ | ä¾‹ |
|------|------|-----|
| å¤‰æ•° | camelCase | userName |
| é–¢æ•° | camelCase | getUserById |
| ã‚¯ãƒ©ã‚¹ | PascalCase | UserService |
| å®šæ•° | UPPER_SNAKE_CASE | MAX_RETRY_COUNT |
```

**å‰Šæ¸›**: ç´„150ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„80ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ46.7%å‰Šæ¸›ï¼‰

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: åœ§ç¸®ã—ã™ãŽã‚‹ã¨ç†è§£ã—ã«ãããªã‚Šã¾ã™ã€‚ãƒãƒ©ãƒ³ã‚¹ãŒé‡è¦ã§ã™ã€‚

---

#### æˆ¦ç•¥2: é‡è¤‡ã®å‰Šæ¸›

**ç›®çš„**: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã§é‡è¤‡ã™ã‚‹æƒ…å ±ã‚’çµ±åˆ

**æ‰‹æ³•1: å…±é€šæƒ…å ±ã®çµ±åˆ**

ðŸ“ **æœ€é©åŒ–å‰**:

`coding.md`:
```markdown
# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: My Project
æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Node.js, TypeScript, React
```

`api-design.md`:
```markdown
# APIè¨­è¨ˆè¦ç´„

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: My Project
æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Node.js, TypeScript, React
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:

`README.md`:
```markdown
# My Project

æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: Node.js, TypeScript, React
```

`coding.md`:
```markdown
# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã¯README.mdã‚’å‚ç…§ï¼‰
```

`api-design.md`:
```markdown
# APIè¨­è¨ˆè¦ç´„

ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã¯README.mdã‚’å‚ç…§ï¼‰
```

**å‰Šæ¸›**: ç´„200ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„100ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ50%å‰Šæ¸›ï¼‰

**æ‰‹æ³•2: å‚ç…§ã®æ´»ç”¨**

ðŸ“ **æœ€é©åŒ–å‰**:

`frontend.md`:
```markdown
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¦ç´„

## å‘½åè¦å‰‡
- å¤‰æ•°: camelCase
- é–¢æ•°: camelCase
- ã‚¯ãƒ©ã‚¹: PascalCase
- å®šæ•°: UPPER_SNAKE_CASE
```

`backend.md`:
```markdown
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¦ç´„

## å‘½åè¦å‰‡
- å¤‰æ•°: camelCase
- é–¢æ•°: camelCase
- ã‚¯ãƒ©ã‚¹: PascalCase
- å®šæ•°: UPPER_SNAKE_CASE
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:

`coding.md`:
```markdown
# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

## å‘½åè¦å‰‡
- å¤‰æ•°: camelCase
- é–¢æ•°: camelCase
- ã‚¯ãƒ©ã‚¹: PascalCase
- å®šæ•°: UPPER_SNAKE_CASE
```

`frontend.md`:
```markdown
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰è¦ç´„

å‘½åè¦å‰‡ã¯coding.mdã‚’å‚ç…§
```

`backend.md`:
```markdown
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¦ç´„

å‘½åè¦å‰‡ã¯coding.mdã‚’å‚ç…§
```

**å‰Šæ¸›**: ç´„300ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„150ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ50%å‰Šæ¸›ï¼‰

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: é‡è¤‡ã‚’å‰Šæ¸›ã™ã‚‹ã¨ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚‚å®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚

---

#### æˆ¦ç•¥3: æ§‹é€ åŒ–ã®å·¥å¤«

**ç›®çš„**: æƒ…å ±ã‚’åŠ¹çŽ‡çš„ã«æ§‹é€ åŒ–

**æ‰‹æ³•1: éšŽå±¤æ§‹é€ ã®æ´»ç”¨**

ðŸ“ **æœ€é©åŒ–å‰**:
```markdown
# ãƒ«ãƒ¼ãƒ«

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€APIè¨­è¨ˆè¦ç´„ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ç´„ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ç´„ãŒã‚ã‚Šã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«ã¯å‘½åè¦å‰‡ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå«ã¾ã‚Œã¾ã™ã€‚

APIè¨­è¨ˆè¦ç´„ã«ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½åã€HTTPãƒ¡ã‚½ãƒƒãƒ‰ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ãŒå«ã¾ã‚Œã¾ã™ã€‚
```

ðŸ“ **æœ€é©åŒ–å¾Œ**:
```markdown
# ãƒ«ãƒ¼ãƒ«

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
- å‘½åè¦å‰‡
- ã‚³ãƒ¡ãƒ³ãƒˆ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

## APIè¨­è¨ˆè¦ç´„
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½å
- HTTPãƒ¡ã‚½ãƒƒãƒ‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```

**å‰Šæ¸›**: ç´„150ãƒˆãƒ¼ã‚¯ãƒ³ â†’ ç´„80ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆ46.7%å‰Šæ¸›ï¼‰

**æ‰‹æ³•2: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ´»ç”¨**

ðŸ“ **æœ€é©åŒ–å‰**:

å„ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã«åŒã˜æ§‹é€ ã‚’è¨˜è¿°ã€‚

ðŸ“ **æœ€é©åŒ–å¾Œ**:

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã€å„ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«å¾“ã†ã€‚

`template.md`:
```markdown
# {ãƒ«ãƒ¼ãƒ«å}

## ç›®çš„
{ç›®çš„}

## ãƒ«ãƒ¼ãƒ«
{ãƒ«ãƒ¼ãƒ«}

## ä¾‹
{ä¾‹}
```

å„ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«:
```markdown
# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

## ç›®çš„
ä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã®ç¶­æŒ

## ãƒ«ãƒ¼ãƒ«
- å‘½åè¦å‰‡: camelCase
- ã‚³ãƒ¡ãƒ³ãƒˆ: JSDoc

## ä¾‹
```javascript
/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—
 */
function getUser() {}
```
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: æ§‹é€ åŒ–ã™ã‚‹ã¨ã€AIã®ç†è§£ã‚‚å‘ä¸Šã—ã¾ã™ã€‚

---

#### 7.1.2 ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²æˆ¦ç•¥

#### åˆ†å‰²ã®åŸºæº–

**åŸºæº–1: ã‚µã‚¤ã‚º**
- 1ãƒ•ã‚¡ã‚¤ãƒ«5000ãƒˆãƒ¼ã‚¯ãƒ³ä»¥ä¸‹
- 10KBä»¥ä¸‹

**åŸºæº–2: è²¬ä»»**
- 1ãƒ•ã‚¡ã‚¤ãƒ«1ãƒˆãƒ”ãƒƒã‚¯
- é–¢é€£ã™ã‚‹æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹

**åŸºæº–3: ä½¿ç”¨é »åº¦**
- é »ç¹ã«ä½¿ç”¨: å°ã•ãåˆ†å‰²
- ç¨€ã«ä½¿ç”¨: ã¾ã¨ã‚ã‚‹

#### åˆ†å‰²ã®æ–¹æ³•

**æ–¹æ³•1: ãƒˆãƒ”ãƒƒã‚¯åˆ¥åˆ†å‰²**

**åˆ†å‰²å‰**:

`rules.md`:
```markdown
# ãƒ«ãƒ¼ãƒ«

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
...

## APIè¨­è¨ˆè¦ç´„
...

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ç´„
...
```

**åˆ†å‰²å¾Œ**:

`coding.md`:
```markdown
# ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
...
```

`api-design.md`:
```markdown
# APIè¨­è¨ˆè¦ç´„
...
```

`deployment.md`:
```markdown
# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ç´„
...
```

**æ–¹æ³•2: éšŽå±¤åˆ¥åˆ†å‰²**

**åˆ†å‰²å‰**:

`aws-rules.md`:
```markdown
# AWSè¦ç´„

## Lambda
...

## DynamoDB
...

## S3
...
```

**åˆ†å‰²å¾Œ**:

`aws/lambda.md`:
```markdown
# Lambdaè¦ç´„
...
```

`aws/dynamodb.md`:
```markdown
# DynamoDBè¦ç´„
...
```

`aws/s3.md`:
```markdown
# S3è¦ç´„
...
```

#### ç®¡ç†ã®å·¥å¤«

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ **:
```
.amazonq/
â””â”€â”€ rules/
    â”œâ”€â”€ README.md          # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    â”œâ”€â”€ coding.md
    â”œâ”€â”€ api-design.md
    â”œâ”€â”€ deployment.md
    â””â”€â”€ aws/
        â”œâ”€â”€ lambda.md
        â”œâ”€â”€ dynamodb.md
        â””â”€â”€ s3.md
```

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«**:

`rules/README.md`:
```markdown
# ãƒ«ãƒ¼ãƒ«ä¸€è¦§

## ä¸€èˆ¬
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼ˆ`coding.md`ï¼‰
- APIè¨­è¨ˆè¦ç´„ï¼ˆ`api-design.md`ï¼‰
- ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ç´„ï¼ˆ`deployment.md`ï¼‰

## AWS
- Lambdaè¦ç´„ï¼ˆ`aws/lambda.md`ï¼‰
- DynamoDBè¦ç´„ï¼ˆ`aws/dynamodb.md`ï¼‰
- S3è¦ç´„ï¼ˆ`aws/s3.md`ï¼‰
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: åˆ†å‰²ã—ã™ãŽã‚‹ã¨ç®¡ç†ãŒå¤§å¤‰ã«ãªã‚Šã¾ã™ã€‚é©åº¦ãªåˆ†å‰²ã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚

---

#### 7.1.3 å‹•çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†

#### Hooksã®æ´»ç”¨

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ç’°å¢ƒåˆ¥ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**

`scripts/pre-chat.sh`:
```bash
#!/bin/bash

# ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
ENV=${ENVIRONMENT:-development}

# ç’°å¢ƒåˆ¥ã®ãƒ«ãƒ¼ãƒ«ã‚’ç”Ÿæˆ
cat > /tmp/env-rules.md <<EOF
# ç’°å¢ƒ: $ENV

## è¨­å®š
- API URL: $(get_api_url $ENV)
- Database: $(get_db_name $ENV)
- Log Level: $(get_log_level $ENV)
EOF
```

**Agentè¨­å®š**:
```json
{
  "resources": [
    "file://README.md",
    "file://.amazonq/rules/**/*.md",
    "file:///tmp/env-rules.md"
  ],
  "hooks": {
    "pre_chat": "scripts/pre-chat.sh"
  }
}
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: Gitãƒ–ãƒ©ãƒ³ãƒæƒ…å ±**

`scripts/pre-chat.sh`:
```bash
#!/bin/bash

# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒæƒ…å ±ã‚’ç”Ÿæˆ
BRANCH=$(git branch --show-current)
COMMIT=$(git log -1 --pretty=%H)
MESSAGE=$(git log -1 --pretty=%B)

cat > /tmp/git-context.md <<EOF
# Gitæƒ…å ±

- ãƒ–ãƒ©ãƒ³ãƒ: $BRANCH
- ã‚³ãƒŸãƒƒãƒˆ: $COMMIT
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: $MESSAGE
EOF
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: å‹•çš„ãªãƒ•ã‚¡ã‚¤ãƒ«é¸æŠž**

`scripts/pre-chat.sh`:
```bash
#!/bin/bash

# æœ€è¿‘å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
git diff --name-only HEAD~5 > /tmp/recent-files.txt

# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ
cat > /tmp/recent-changes.md <<EOF
# æœ€è¿‘ã®å¤‰æ›´

$(cat /tmp/recent-files.txt)
EOF
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: Hooksã¯é«˜åº¦ãªæ©Ÿèƒ½ã§ã™ã€‚åŸºæœ¬ã«æ…£ã‚Œã¦ã‹ã‚‰ä½¿ç”¨ã—ã¾ã—ã‚‡ã†ã€‚

---

### 7.2 ãƒãƒ¼ãƒ é–‹ç™ºã§ã®æ´»ç”¨

#### 7.2.1 å…±é€šãƒ«ãƒ¼ãƒ«ã®å…±æœ‰

#### ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ 

**æŽ¨å¥¨æ§‹é€ **:
```
.amazonq/
â””â”€â”€ rules/
    â”œâ”€â”€ README.md          # ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
    â”œâ”€â”€ coding.md          # ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
    â”œâ”€â”€ api-design.md      # APIè¨­è¨ˆè¦ç´„
    â”œâ”€â”€ deployment.md      # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ç´„
    â”œâ”€â”€ security.md        # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ç´„
    â””â”€â”€ team/
        â”œâ”€â”€ workflow.md    # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
        â””â”€â”€ review.md      # ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦ç´„
```

#### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

**`.gitignore`**:
```gitignore
# å€‹äººè¨­å®šã¯é™¤å¤–
.amazonq/config.json
.amazonq/local-rules.md

# æ©Ÿå¯†æƒ…å ±ã¯é™¤å¤–
.env
.env.*
config/production.yaml
```

**ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥**:
```bash
# ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´
git add .amazonq/rules/
git commit -m "Update coding standards"

# Agentè¨­å®šã®å¤‰æ›´
git add .amazonq/agent.json
git commit -m "Add architecture.md to context"
```

#### ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

**ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**:
```markdown
## å¤‰æ›´å†…å®¹
- [ ] ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ /å¤‰æ›´
- [ ] Agentè¨­å®šã®å¤‰æ›´

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹ç¢ºèª
- [ ] ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚’ç¢ºèªï¼ˆ`/context show`ï¼‰
- [ ] ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«å…±æœ‰

## å½±éŸ¿ç¯„å›²
- å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:
- æœŸå¾…ã•ã‚Œã‚‹åŠ¹æžœ:
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: ãƒãƒ¼ãƒ é–‹ç™ºã§ã¯ã€å¤‰æ›´ã®å½±éŸ¿ã‚’å¿…ãšç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚

---

#### 7.2.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–ã®ç¢ºç«‹

#### æ¨™æº–è¨­å®šã®å®šç¾©

**æ¨™æº–Agentè¨­å®š**:

`.amazonq/agent.json`:
```json
{
  "name": "project-standard-agent",
  "description": "Standard agent for the project",
  "resources": [
    "file://README.md",
    "file://.amazonq/rules/**/*.md",
    "file://docs/architecture.md"
  ],
  "tools": {
    "fs_read": {
      "deniedPaths": [
        ".env",
        ".env.*",
        "**/*.key",
        "**/*.pem",
        "**/secrets/**",
        "config/production.yaml",
        "node_modules/**",
        ".git/**"
      ]
    }
  }
}
```

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–

**`.amazonq/README.md`**:
```markdown
# Amazon Q Developer CLIè¨­å®š

## Agentè¨­å®š

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯æ¨™æº–Agentè¨­å®šã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

### å«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- README.md - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- .amazonq/rules/**/*.md - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒ«
- docs/architecture.md - ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### é™¤å¤–ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- .env - ç’°å¢ƒå¤‰æ•°ï¼ˆæ©Ÿå¯†æƒ…å ±ï¼‰
- config/production.yaml - æœ¬ç•ªè¨­å®šï¼ˆæ©Ÿå¯†æƒ…å ±ï¼‰
- node_modules/ - ä¾å­˜é–¢ä¿‚
- .git/ - Gitãƒªãƒã‚¸ãƒˆãƒª

### ä½¿ç”¨æ–¹æ³•
```bash
# Agentã‚’èµ·å‹•
q chat --agent project-standard-agent

# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¢ºèª
/context show
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„ â†’ [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](../06_troubleshooting/02_common-issues.md)
- ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶é™ã‚’è¶…ãˆã‚‹ â†’ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šæ¸›
```

#### å‘¨çŸ¥æ–¹æ³•

**ãƒãƒ¼ãƒ ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°**:
- Agentè¨­å®šã®èª¬æ˜Ž
- ä½¿ç”¨æ–¹æ³•ã®ãƒ‡ãƒ¢
- è³ªç–‘å¿œç­”

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- README.mdã«è¨˜è¼‰
- Wikiã«è©³ç´°ã‚’è¨˜è¼‰
- Slackã§å…±æœ‰

**ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**:
- æ–°ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®èª¬æ˜Ž
- ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ”¯æ´
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åŽé›†

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: æ¨™æº–ã‚’ç¢ºç«‹ã™ã‚‹ã“ã¨ã§ã€ãƒãƒ¼ãƒ å…¨ä½“ã®ç”Ÿç”£æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚

---

#### 7.2.3 ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ã®çµ±åˆ

#### `.gitignore`ã®è¨­å®š

```gitignore
# Amazon Q Developer CLI
.amazonq/config.json      # å€‹äººè¨­å®š
.amazonq/local-rules.md   # å€‹äººãƒ«ãƒ¼ãƒ«

# æ©Ÿå¯†æƒ…å ±
.env
.env.*
config/production.yaml
config/staging.yaml
*.key
*.pem
secrets/

# ä¾å­˜é–¢ä¿‚
node_modules/
venv/

# ãƒ“ãƒ«ãƒ‰æˆæžœç‰©
dist/
build/
.next/

# ãƒ­ã‚°
logs/
*.log
```

#### ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥

**ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´**:
```bash
git add .amazonq/rules/
git commit -m "feat: Add API design guidelines"
```

**Agentè¨­å®šã®å¤‰æ›´**:
```bash
git add .amazonq/agent.json
git commit -m "chore: Update agent context files"
```

#### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥

**æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒ**:
```bash
# æ–°ã—ã„ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ 
git checkout -b feature/add-security-rules

# ãƒ«ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
touch .amazonq/rules/security.md

# ã‚³ãƒŸãƒƒãƒˆ
git add .amazonq/rules/security.md
git commit -m "feat: Add security guidelines"

# ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
git push origin feature/add-security-rules
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: Agentè¨­å®šã‚‚ã‚³ãƒ¼ãƒ‰ã¨åŒæ§˜ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã—ã¾ã—ã‚‡ã†ã€‚

---

### 7.3 å®Ÿè£…ã®å†…éƒ¨è©³ç´°

#### 7.3.1 å†…éƒ¨å‹•ä½œã®ç†è§£

#### èª­ã¿è¾¼ã¿ãƒ—ãƒ­ã‚»ã‚¹ã®è©³ç´°

**ã‚¹ãƒ†ãƒƒãƒ—1: Agentèµ·å‹•**
```
q chat --agent my-agent
â†“
Agentè¨­å®šã‚’èª­ã¿è¾¼ã¿
â†“
resources ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è§£æž
```

**ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®è§£æ±º**
```
"file://README.md"
â†“
ç›¸å¯¾ãƒ‘ã‚¹ã‚’çµ¶å¯¾ãƒ‘ã‚¹ã«å¤‰æ›
â†“
/path/to/project/README.md
```

**ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿**
```
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
â†“
UTF-8ã§ãƒ‡ã‚³ãƒ¼ãƒ‰
â†“
ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
```

**ã‚¹ãƒ†ãƒƒãƒ—4: ãƒˆãƒ¼ã‚¯ãƒ³åŒ–**
```
ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â†“
ãƒˆãƒ¼ã‚¯ãƒ³ã«åˆ†å‰²
â†“
ãƒˆãƒ¼ã‚¯ãƒ³åˆ—
```

**ã‚¹ãƒ†ãƒƒãƒ—5: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«è¿½åŠ **
```
ãƒˆãƒ¼ã‚¯ãƒ³åˆ—
â†“
ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«è¿½åŠ 
â†“
AIãŒåˆ©ç”¨å¯èƒ½
```

#### ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã®ä»•çµ„ã¿

**ãƒˆãƒ¼ã‚¯ãƒ³ã¨ã¯**:
- AIãŒç†è§£ã§ãã‚‹æœ€å°å˜ä½
- è‹±èªž: ç´„4æ–‡å­— = 1ãƒˆãƒ¼ã‚¯ãƒ³
- æ—¥æœ¬èªž: ç´„2-3æ–‡å­— = 1ãƒˆãƒ¼ã‚¯ãƒ³

**ä¾‹**:
```
"Hello, World!" â†’ ["Hello", ",", " World", "!"] (4ãƒˆãƒ¼ã‚¯ãƒ³)
"ã“ã‚“ã«ã¡ã¯" â†’ ["ã“ã‚“", "ã«ã¡", "ã¯"] (3ãƒˆãƒ¼ã‚¯ãƒ³)
```

#### ãƒ¡ãƒ¢ãƒªç®¡ç†

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦**:
- æœ€å¤§å®¹é‡: 80000ãƒˆãƒ¼ã‚¯ãƒ³
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ: 75%ã¾ã§ï¼ˆ60000ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
- ä¼šè©±ã¨å¿œç­”: 25%ï¼ˆ20000ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰

**ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**:
- 1ãƒˆãƒ¼ã‚¯ãƒ³ â‰ˆ 4ãƒã‚¤ãƒˆ
- 60000ãƒˆãƒ¼ã‚¯ãƒ³ â‰ˆ 240KB

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: å†…éƒ¨å‹•ä½œã‚’ç†è§£ã™ã‚‹ã¨ã€æœ€é©åŒ–ãŒã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

---

#### 7.3.2 JSON Schemaã®ä»•æ§˜

#### ã‚¹ã‚­ãƒ¼ãƒžã®å…¨ä½“åƒ

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Agent name"
    },
    "description": {
      "type": "string",
      "description": "Agent description"
    },
    "resources": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^file://"
      },
      "description": "Context files"
    },
    "tools": {
      "type": "object",
      "properties": {
        "fs_read": {
          "type": "object",
          "properties": {
            "deniedPaths": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "required": ["name", "resources"]
}
```

#### å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è©³ç´°

**`name`**:
- åž‹: string
- å¿…é ˆ: Yes
- èª¬æ˜Ž: Agentå

**`description`**:
- åž‹: string
- å¿…é ˆ: No
- èª¬æ˜Ž: Agentã®èª¬æ˜Ž

**`resources`**:
- åž‹: array of string
- å¿…é ˆ: Yes
- èª¬æ˜Ž: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
- ãƒ‘ã‚¿ãƒ¼ãƒ³: `^file://`

**`tools.fs_read.deniedPaths`**:
- åž‹: array of string
- å¿…é ˆ: No
- èª¬æ˜Ž: èª­ã¿è¾¼ã¿ã‚’æ‹’å¦ã™ã‚‹ãƒ‘ã‚¹

#### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«

**ãƒ«ãƒ¼ãƒ«1: `file://`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹**
```json
{
  "resources": [
    "file://README.md"  // âœ“
  ]
}
```

**ãƒ«ãƒ¼ãƒ«2: é…åˆ—å½¢å¼**
```json
{
  "resources": [
    "file://README.md",
    "file://.amazonq/rules/**/*.md"
  ]
}
```

**ãƒ«ãƒ¼ãƒ«3: å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**
```json
{
  "name": "my-agent",  // å¿…é ˆ
  "resources": []      // å¿…é ˆ
}
```

ðŸ’¡ **åˆå¿ƒè€…å‘ã‘ãƒã‚¤ãƒ³ãƒˆ**: JSON Schemaã‚’ç†è§£ã™ã‚‹ã¨ã€è¨­å®šãƒŸã‚¹ã‚’é˜²ã’ã¾ã™ã€‚

---

## ã¾ã¨ã‚

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **æœ€é©åŒ–æˆ¦ç•¥**
   - ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹çŽ‡: åœ§ç¸®ã€é‡è¤‡å‰Šæ¸›ã€æ§‹é€ åŒ–
   - ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²: ã‚µã‚¤ã‚ºã€è²¬ä»»ã€ä½¿ç”¨é »åº¦
   - å‹•çš„ç®¡ç†: Hooksã®æ´»ç”¨

2. **ãƒãƒ¼ãƒ é–‹ç™º**
   - å…±é€šãƒ«ãƒ¼ãƒ«: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–: å®šç¾©ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã€å‘¨çŸ¥
   - ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†: .gitignoreã€ã‚³ãƒŸãƒƒãƒˆæˆ¦ç•¥

3. **å†…éƒ¨è©³ç´°**
   - èª­ã¿è¾¼ã¿ãƒ—ãƒ­ã‚»ã‚¹: 5ã‚¹ãƒ†ãƒƒãƒ—
   - ãƒˆãƒ¼ã‚¯ãƒ³åŒ–: è‹±èªž4æ–‡å­—ã€æ—¥æœ¬èªž2-3æ–‡å­—
   - JSON Schema: ä»•æ§˜ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ç¬¬8ç« ã§ã¯ã€å‚è€ƒæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚

---

**å‡ºå…¸**:
- [å®Ÿè£…ã‚³ãƒ¼ãƒ‰](https://github.com/aws/amazon-q-developer-cli/blob/main/crates/chat-cli/src/cli/agent/mod.rs)
- [JSON Schema](https://raw.githubusercontent.com/aws/amazon-q-developer-cli/refs/heads/main/schemas/agent-v1.json)

---

## ðŸ“– ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

â† **å‰ã¸**: [ç¬¬6ç« : ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](06_troubleshooting.md) | **æ¬¡ã¸**: [ç¬¬8ç« : å‚è€ƒæƒ…å ±](08_reference.md) â†’

---

æœ€çµ‚æ›´æ–°: 2025-11-01

