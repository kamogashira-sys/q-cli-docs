[ãƒ›ãƒ¼ãƒ ](../../README.md) > [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../README.md) > [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰](README.md) > 03 File Access Control

---

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

**å¯¾è±¡**: Amazon Q Developer CLI

---

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã¯ã€Amazon Q Developer CLIã®`fs_read`ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ¯ fs_readãƒ„ãƒ¼ãƒ«ã¨ã¯

### æ©Ÿèƒ½

`fs_read`ãƒ„ãƒ¼ãƒ«ã¯ã€Amazon Q CLIãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚

**ä¸»ãªç”¨é€”**:
- ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®èª­ã¿å–ã‚Š
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å‚ç…§
- ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®åˆ†æ

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œ

**é‡è¦**: `fs_read`ãƒ„ãƒ¼ãƒ«ã¯**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¿¡é ¼æ¸ˆã¿**ï¼ˆtrustedï¼‰ã§ã™ã€‚

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ä½œ
q chat
Amazon Q> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§
# â†’ ç¢ºèªãªã—ã§å³åº§ã«å®Ÿè¡Œã•ã‚Œã‚‹
```

**ç†ç”±**:
- ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šã¯ä¸€èˆ¬çš„ã«å®‰å…¨ãªæ“ä½œ
- é »ç¹ã«ä½¿ç”¨ã•ã‚Œã‚‹æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š

---

## âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯

### æ½œåœ¨çš„ãªãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | èª¬æ˜ | å½±éŸ¿ |
|--------|------|------|
| **æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿å–ã‚Š** | `.env`ã€ç§˜å¯†éµã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ« | æƒ…å ±æ¼æ´© |
| **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®éœ²å‡º** | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±ã€API ã‚­ãƒ¼ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¾µå®³ |
| **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¾µå®³** | å€‹äººæƒ…å ±ã€ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ« | ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹é•å |
| **æ„å›³ã—ãªã„å…±æœ‰** | ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã«æ©Ÿå¯†æƒ…å ±ãŒæ®‹ã‚‹ | ãƒ‡ãƒ¼ã‚¿æ¼æ´© |

### å…·ä½“ä¾‹

**ã‚·ãƒŠãƒªã‚ª1: ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿å–ã‚Š**
```bash
Amazon Q> .envãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèªã—ã¦
# â†’ DATABASE_PASSWORD=secret123 ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹
```

**ã‚·ãƒŠãƒªã‚ª2: SSHç§˜å¯†éµã®éœ²å‡º**
```bash
Amazon Q> ~/.ssh/id_rsaã‚’èª­ã‚“ã§
# â†’ ç§˜å¯†éµãŒèª­ã¿å–ã‚‰ã‚Œã‚‹
```

**ã‚·ãƒŠãƒªã‚ª3: AWSèªè¨¼æƒ…å ±ã®æ¼æ´©**
```bash
Amazon Q> ~/.aws/credentialsã‚’ç¢ºèªã—ã¦
# â†’ AWSèªè¨¼æƒ…å ±ãŒèª­ã¿å–ã‚‰ã‚Œã‚‹
```

---

## ğŸ”’ æ¨å¥¨è¨­å®š

### ã‚»ãƒƒã‚·ãƒ§ãƒ³ã”ã¨ã®åˆ¶é™

ãƒãƒ£ãƒƒãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«æ¯å›åˆ¶é™ã™ã‚‹æ–¹æ³•ï¼š

```bash
q chat
Amazon Q> /tools untrust fs_read
```

**åŠ¹æœ**:
- ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šå‰ã«ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†ã¾ã§æœ‰åŠ¹

### æ°¸ç¶šçš„ãªåˆ¶é™ï¼ˆæ¨å¥¨ï¼‰

ã‚·ã‚§ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¿½åŠ ï¼š

**bash**:
```bash
echo 'alias q="q --untrust-fs-read"' >> ~/.bashrc
source ~/.bashrc
```

**zsh**:
```bash
echo 'alias q="q --untrust-fs-read"' >> ~/.zshrc
source ~/.zshrc
```

**åŠ¹æœ**:
- ã™ã¹ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§è‡ªå‹•çš„ã«åˆ¶é™ã•ã‚Œã‚‹
- æœ€ã‚‚å®‰å…¨ãªæ–¹æ³•

### Agentè¨­å®šã§ã®åˆ¶é™

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«åˆ¶é™ã™ã‚‹æ–¹æ³•ï¼š

**`.q/agent.json`**:
```json
{
  "name": "secure-project",
  "untrustedTools": ["fs_read"]
}
```

**åŠ¹æœ**:
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§è‡ªå‹•é©ç”¨
- ãƒãƒ¼ãƒ å…¨ä½“ã§å…±æœ‰å¯èƒ½

---

## ğŸ¨ ç’°å¢ƒåˆ¥ã®æ¨å¥¨è¨­å®š

### é–‹ç™ºç’°å¢ƒ

**åŸºæœ¬çš„ãªä¿è­·**:
```bash
q chat --untrust-fs-read
```

**ç†ç”±**:
- é–‹ç™ºä¸­ã‚‚æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¿è­·
- æŸ”è»Ÿæ€§ã‚’ç¶­æŒ

### æœ¬ç•ªç’°å¢ƒ

**å³æ ¼ãªåˆ¶é™**:
```bash
# æ°¸ç¶šçš„ãªåˆ¶é™
alias q="q --untrust-fs-read"

# Agentè¨­å®š
{
  "untrustedTools": ["fs_read", "fs_write", "execute_bash"]
}
```

**ç†ç”±**:
- æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã®ä¿è­·
- æ„å›³ã—ãªã„å¤‰æ›´ã®é˜²æ­¢

### æ©Ÿå¯†ç’°å¢ƒ

**ã™ã¹ã¦åˆ¶é™**:
```bash
# ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã‚’åˆ¶é™
alias q="q --untrust-all-tools"
```

**ç†ç”±**:
- æœ€é«˜ãƒ¬ãƒ™ãƒ«ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶

---

## ğŸ” ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å‹•ä½œ

### åˆ¶é™æ™‚ã®å‹•ä½œ

`fs_read`ã‚’åˆ¶é™ã™ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šå‰ã«ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```bash
Amazon Q> README.mdã‚’èª­ã‚“ã§

âš ï¸  File Access Request
Amazon Q wants to read: /path/to/README.md

Allow this action? [y/N]:
```

**é¸æŠè‚¢**:
- `y`: è¨±å¯ï¼ˆä»Šå›ã®ã¿ï¼‰
- `N`: æ‹’å¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- `a`: ã™ã¹ã¦è¨±å¯ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ï¼‰

---

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã‚ãªã„

**ç—‡çŠ¶**:
```
Error: Permission denied to read file
```

**åŸå› **:
- `fs_read`ãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å•é¡Œ

**å¯¾å‡¦**:
```bash
# ä¸€æ™‚çš„ã«è¨±å¯
Amazon Q> /tools trust fs_read

# ã¾ãŸã¯ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§è¨±å¯
```

### ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶**:
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒç¢ºèªãªã—ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹

**åŸå› **:
- `fs_read`ãŒä¿¡é ¼æ¸ˆã¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

**å¯¾å‡¦**:
```bash
# åˆ¶é™ã‚’æœ‰åŠ¹åŒ–
Amazon Q> /tools untrust fs_read
```

### æ¯å›ç¢ºèªãŒé¢å€’

**ç—‡çŠ¶**:
- é »ç¹ã«ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹

**å¯¾å‡¦**:
```bash
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã™ã¹ã¦è¨±å¯
# ç¢ºèªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ 'a' ã‚’é¸æŠ

# ã¾ãŸã¯ä¸€æ™‚çš„ã«ä¿¡é ¼
Amazon Q> /tools trust fs_read
```

---

## ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. æ©Ÿå¯†ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿è­·

**`.gitignore`ã«è¿½åŠ **:
```
.env
.env.*
*.key
*.pem
credentials
secrets.json
```

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³**:
```bash
chmod 600 ~/.ssh/id_rsa
chmod 600 ~/.aws/credentials
```

### 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã®è¨­å®š

**Agentè¨­å®šã‚’æ´»ç”¨**:
```json
{
  "name": "production-app",
  "untrustedTools": ["fs_read"],
  "description": "æœ¬ç•ªç’°å¢ƒç”¨ã®å³æ ¼ãªè¨­å®š"
}
```

### 3. ãƒãƒ¼ãƒ å…±æœ‰

**è¨­å®šã‚’ãƒªãƒã‚¸ãƒˆãƒªã«å«ã‚ã‚‹**:
```bash
git add .q/agent.json
git commit -m "Add secure agent configuration"
```

### 4. å®šæœŸçš„ãªç¢ºèª

**è¨­å®šã®ç¢ºèª**:
```bash
Amazon Q> /tools list
# â†’ ä¿¡é ¼æ¸ˆã¿ãƒ„ãƒ¼ãƒ«ã®ä¸€è¦§ã‚’ç¢ºèª
```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¦‚è¦](01_security-overview.md)
- [AWS APIåˆ¶å¾¡](04_aws-api-control.md)
- [trust-allå®‰å…¨ä½¿ç”¨ã‚¬ã‚¤ãƒ‰](06_trust-all-safety.md)

### è¨­å®šã‚¬ã‚¤ãƒ‰
- [Agentè¨­å®š](../03_configuration/03_agent-configuration.md)
- [ç’°å¢ƒå¤‰æ•°](../03_configuration/06_environment-variables.md)

### ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå±•é–‹
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](../05_deployment/03_security-checklist.md)
- [ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå°å…¥ã‚¬ã‚¤ãƒ‰](../05_deployment/01_enterprise-deployment.md)

### AWSå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Security considerations and best practices](https://docs.aws.amazon.com/amazonq/latest/qdeveloper-ug/command-line-chat-security.html)

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µã‚„è³ªå•ãŒã‚ã‚‹å ´åˆï¼š

1. **AWSå…¬å¼**: [AWS Security](https://aws.amazon.com/security/)
2. **GitHub**: [amazon-q-developer-cli/issues](https://github.com/aws/amazon-q-developer-cli/issues)
3. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](../06_troubleshooting/02_common-issues.md)

---

## ğŸ“– ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

â† **å‰ã¸**: [ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼](02_data-privacy.md) | **æ¬¡ã¸**: [AWS APIåˆ¶å¾¡](04_aws-api-control.md) â†’



---

æœ€çµ‚æ›´æ–°: 2025-10-26
