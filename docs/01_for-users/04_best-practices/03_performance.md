[ãƒ›ãƒ¼ãƒ ](../../README.md) > [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../README.md) > [ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](README.md) > 03 Performance

---

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

æœ€çµ‚æ›´æ–°: %Y->-  
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.17.0ä»¥é™

---

## âš¡ æ¦‚è¦

Amazon Q CLIã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€é©åŒ–ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†ã€Knowledge Baseæœ€é©åŒ–ã€MCPè¨­å®šã€ãƒ­ã‚°ç®¡ç†ãªã©ã€å®Ÿè·µçš„ãªæœ€é©åŒ–æ‰‹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### ã“ã®ã‚¬ã‚¤ãƒ‰ã§å­¦ã¹ã‚‹ã“ã¨

- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡ã®æ¸¬å®šã¨ç®¡ç†
- Knowledge Baseã®æœ€é©åŒ–
- MCPã‚µãƒ¼ãƒãƒ¼ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- ãƒ­ã‚°ã¨ãƒ‡ãƒãƒƒã‚°ã®åŠ¹ç‡åŒ–
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡ã®ç¢ºèª

**v1.17.0ã®æ–°æ©Ÿèƒ½**:
```bash
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æœ‰åŠ¹åŒ–
q settings chat.enableContextUsageIndicator true
```

**è¡¨ç¤ºä¾‹**:
```
Context: 45% (4,500 / 10,000 tokens)
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã®æ¸¬å®š

```bash
# æ™‚é–“ã‚’æ¸¬å®šã—ã¦ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
time q chat "Hello, Q!"

# å‡ºåŠ›ä¾‹:
# real    0m2.345s
# user    0m0.123s
# sys     0m0.045s
```

### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®ç›£è¦–

```bash
# ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã‚’ç¢ºèª
ps aux | grep q

# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ç¢ºèª
top -p $(pgrep -f "q chat")
```

---

## ğŸ§  ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†

### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä»•çµ„ã¿

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã¯**:
- AIãƒ¢ãƒ‡ãƒ«ãŒä¸€åº¦ã«å‡¦ç†ã§ãã‚‹æƒ…å ±é‡ã®ä¸Šé™
- ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã§æ¸¬å®šï¼ˆ1ãƒˆãƒ¼ã‚¯ãƒ³ â‰ˆ 4æ–‡å­—ï¼‰
- ä½¿ç”¨ç‡ãŒé«˜ã„ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒä½ä¸‹

**ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®è¨ˆç®—**:
- ãƒ†ã‚­ã‚¹ãƒˆ: ç´„4æ–‡å­— = 1ãƒˆãƒ¼ã‚¯ãƒ³
- ã‚³ãƒ¼ãƒ‰: ç´„3æ–‡å­— = 1ãƒˆãƒ¼ã‚¯ãƒ³
- æ—¥æœ¬èª: ç´„2æ–‡å­— = 1ãƒˆãƒ¼ã‚¯ãƒ³

### ä½¿ç”¨ç‡ã®å½±éŸ¿

| ä½¿ç”¨ç‡ | çŠ¶æ…‹ | æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|--------|------|---------------|
| 0-50% | è‰¯å¥½ | é€šå¸¸ä½¿ç”¨ |
| 50-70% | æ³¨æ„ | ç›£è¦–ã‚’ç¶™ç¶š |
| 70-85% | è­¦å‘Š | åœ§ç¸®ã‚’æ¤œè¨ |
| 85-100% | å±é™º | å³åº§ã«åœ§ç¸® |

### æœ€é©åŒ–æ‰‹æ³•

#### å®šæœŸçš„ãªåœ§ç¸®ï¼ˆ/compactï¼‰

**æ‰‹å‹•åœ§ç¸®**:
```
> /compact
```

**æ¨å¥¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:
- ä½¿ç”¨ç‡ãŒ80%ã‚’è¶…ãˆãŸã¨ã
- é•·æ™‚é–“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾Œ
- å¤§é‡ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œå¾Œ

**åœ§ç¸®ã®åŠ¹æœ**:
- ä¼šè©±å±¥æ­´ã‚’è¦ç´„
- ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å‰Šæ¸›ï¼ˆé€šå¸¸50-70%å‰Šæ¸›ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹é€Ÿåº¦ã®å‘ä¸Š

#### è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã®è¨­å®š

```bash
# è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
q settings chat.disableAutoCompaction false

# è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ–
q settings chat.disableAutoCompaction true
```

**è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã®å‹•ä½œ**:
- ä½¿ç”¨ç‡ãŒä¸€å®šå€¤ã‚’è¶…ãˆã‚‹ã¨è‡ªå‹•å®Ÿè¡Œ
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‡¦ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’ä¸­æ–­ã—ãªã„

**v1.16.0ã§ã®å¤‰æ›´**:
- ä¼šè©±ã‚¯ãƒªã‚¢æ™‚ã®ã‚µãƒãƒªä¿æŒãŒç„¡åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸ
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å‰Šæ¸›

### å®Ÿè·µä¾‹

#### é•·æ™‚é–“ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç®¡ç†

```bash
# 1. ä½¿ç”¨ç‡ã‚’ç›£è¦–
q settings chat.enableContextUsageIndicator true

# 2. å®šæœŸçš„ã«åœ§ç¸®
# ãƒãƒ£ãƒƒãƒˆå†…ã§å®Ÿè¡Œ
> /compact

# 3. å¿…è¦ã«å¿œã˜ã¦ä¼šè©±ã‚’ãƒªã‚»ãƒƒãƒˆ
> /clear
```

#### å¤§é‡ã®ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œæ™‚ã®å¯¾ç­–

```bash
# 1. ãƒãƒƒãƒå‡¦ç†ã‚’æ´»ç”¨ï¼ˆv1.13.0+ï¼‰
# fs_readã¯è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŠ¹ç‡çš„ã«å‡¦ç†

# 2. ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
# Knowledgeè¨­å®šã§é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æŒ‡å®š

# 3. å‡¦ç†å¾Œã«åœ§ç¸®
> /compact
```

#### Knowledgeä½¿ç”¨æ™‚ã®æ³¨æ„ç‚¹

```bash
# 1. é©åˆ‡ãªãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã‚’è¨­å®š
q settings knowledge.chunkSize 1000

# 2. æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã‚’åˆ¶é™
q settings knowledge.maxFiles 1000

# 3. ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
q settings knowledge.defaultExcludePatterns '["**/*.log", "**/*.tmp"]'
```

---

## ğŸ“š Knowledge Baseæœ€é©åŒ–

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­å®š

#### indexTypeã®é¸æŠ

**v1.14.0ã®æ–°æ©Ÿèƒ½**: BM25ã‚µãƒãƒ¼ãƒˆ

```bash
# BM25ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆæ¨å¥¨ï¼‰
q settings knowledge.indexType "bm25"

# Vectorã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
q settings knowledge.indexType "vector"
```

**æ¯”è¼ƒè¡¨**:

| ç‰¹æ€§ | BM25 | Vector |
|------|------|--------|
| æ¤œç´¢é€Ÿåº¦ | é«˜é€Ÿ | ä¸­é€Ÿ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | å°‘ãªã„ | å¤šã„ |
| ç²¾åº¦ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒ | ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ |
| æ¨å¥¨ç”¨é€” | ã‚³ãƒ¼ãƒ‰æ¤œç´¢ | è‡ªç„¶è¨€èªæ¤œç´¢ |

#### chunkSizeã®æœ€é©åŒ–

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
q settings knowledge.chunkSize 1000

# å°ã•ã„ãƒãƒ£ãƒ³ã‚¯ï¼ˆç²¾åº¦é‡è¦–ï¼‰
q settings knowledge.chunkSize 500

# å¤§ãã„ãƒãƒ£ãƒ³ã‚¯ï¼ˆé€Ÿåº¦é‡è¦–ï¼‰
q settings knowledge.chunkSize 2000
```

**ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã®å½±éŸ¿**:
- å°ã•ã„: ç²¾åº¦â†‘ã€é€Ÿåº¦â†“ã€ãƒ¡ãƒ¢ãƒªâ†‘
- å¤§ãã„: ç²¾åº¦â†“ã€é€Ÿåº¦â†‘ã€ãƒ¡ãƒ¢ãƒªâ†“

#### chunkOverlapã®è¨­å®š

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
q settings knowledge.chunkOverlap 200

# ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ãªã—ï¼ˆé€Ÿåº¦é‡è¦–ï¼‰
q settings knowledge.chunkOverlap 0

# å¤§ãã„ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ï¼ˆç²¾åº¦é‡è¦–ï¼‰
q settings knowledge.chunkOverlap 400
```

**ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã®åŠ¹æœ**:
- ãƒãƒ£ãƒ³ã‚¯å¢ƒç•Œã§ã®æƒ…å ±æå¤±ã‚’é˜²ã
- æ¤œç´¢ç²¾åº¦ã®å‘ä¸Š
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚µã‚¤ã‚ºã®å¢—åŠ 

### ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã®æœ€é©åŒ–

#### å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¿½åŠ 

```bash
# å«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³
q settings knowledge.defaultIncludePatterns '[
  "**/*.md",
  "**/*.py",
  "**/*.js",
  "**/*.ts"
]'
```

#### é™¤å¤–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¨­å®š

```bash
# é™¤å¤–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³
q settings knowledge.defaultExcludePatterns '[
  "**/*.log",
  "**/*.tmp",
  "**/node_modules/**",
  "**/.git/**",
  "**/dist/**",
  "**/build/**"
]'
```

#### å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# Knowledge Baseã‚’ã‚¯ãƒªã‚¢
> /knowledge clear

# å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
> /knowledge index
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¯”è¼ƒ

#### BM25 vs Vectoræ¤œç´¢

**ãƒ†ã‚¹ãƒˆæ¡ä»¶**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 1,000
- ç·ã‚µã‚¤ã‚º: 10MB
- ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚º: 1000

**çµæœ**:

| æŒ‡æ¨™ | BM25 | Vector |
|------|------|--------|
| ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ™‚é–“ | 5ç§’ | 15ç§’ |
| æ¤œç´¢æ™‚é–“ | 0.1ç§’ | 0.3ç§’ |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 50MB | 150MB |

#### ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚ºã®å½±éŸ¿

**ãƒ†ã‚¹ãƒˆæ¡ä»¶**:
- ãƒ•ã‚¡ã‚¤ãƒ«æ•°: 1,000
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ—: BM25

**çµæœ**:

| ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚º | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ™‚é–“ | æ¤œç´¢æ™‚é–“ | ãƒ¡ãƒ¢ãƒª |
|--------------|----------------|---------|--------|
| 500 | 7ç§’ | 0.15ç§’ | 70MB |
| 1000 | 5ç§’ | 0.10ç§’ | 50MB |
| 2000 | 4ç§’ | 0.08ç§’ | 35MB |

#### ãƒ•ã‚¡ã‚¤ãƒ«æ•°ã®å½±éŸ¿

**ãƒ†ã‚¹ãƒˆæ¡ä»¶**:
- ãƒãƒ£ãƒ³ã‚¯ã‚µã‚¤ã‚º: 1000
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ—: BM25

**çµæœ**:

| ãƒ•ã‚¡ã‚¤ãƒ«æ•° | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ™‚é–“ | æ¤œç´¢æ™‚é–“ | ãƒ¡ãƒ¢ãƒª |
|-----------|----------------|---------|--------|
| 100 | 0.5ç§’ | 0.05ç§’ | 5MB |
| 1,000 | 5ç§’ | 0.10ç§’ | 50MB |
| 10,000 | 50ç§’ | 0.20ç§’ | 500MB |

---

## ğŸ”§ MCPæœ€é©åŒ–

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š

#### é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤

```json
{
  "mcpServers": {
    "fast-api": {
      "timeout": 30000    // 30ç§’ï¼ˆé«˜é€ŸAPIï¼‰
    },
    "normal-api": {
      "timeout": 120000   // 2åˆ†ï¼ˆé€šå¸¸APIã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
    },
    "slow-api": {
      "timeout": 300000   // 5åˆ†ï¼ˆä½é€ŸAPIï¼‰
    }
  }
}
```

**æ¨å¥¨å€¤**:
- **é«˜é€ŸAPI**: 30,000ms (30ç§’)
  - ä¾‹: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã€ãƒ­ãƒ¼ã‚«ãƒ«DB
- **é€šå¸¸API**: 120,000ms (2åˆ†ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
  - ä¾‹: ä¸€èˆ¬çš„ãªREST API
- **ä½é€ŸAPI**: 300,000ms (5åˆ†)
  - ä¾‹: å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€è¤‡é›‘ãªè¨ˆç®—

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š

```bash
# MCPåˆæœŸåŒ–ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
q settings mcp.initTimeout 180000

# éå¯¾è©±å‹MCPã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
q settings mcp.noInteractiveTimeout 60000
```

### ãƒªãƒˆãƒ©ã‚¤è¨­å®š

**v1.14.0ã®æ”¹å–„**: ãƒªãƒˆãƒ©ã‚¤é€šçŸ¥ã®ãŸã‚ã®é…å»¶è¿½è·¡

```json
{
  "mcpServers": {
    "api": {
      "timeout": 120000,
      "retries": 3,
      "retryDelay": 1000
    }
  }
}
```

### ä¸¦åˆ—å®Ÿè¡Œã®åˆ¶é™

```json
{
  "mcpServers": {
    "api": {
      "maxConcurrentRequests": 5
    }
  }
}
```

### ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ã®é¸æŠ

#### stdioï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ—ãƒ­ã‚»ã‚¹ï¼‰

**ç‰¹å¾´**:
- é«˜é€Ÿï¼ˆãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ï¼‰
- ä½ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·
- ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã®ã¿

**ä½¿ç”¨ä¾‹**:
```json
{
  "mcpServers": {
    "local-tool": {
      "type": "stdio",
      "command": "node",
      "args": ["./server.js"]
    }
  }
}
```

#### HTTPï¼ˆãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ï¼‰

**ç‰¹å¾´**:
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ã‚ã‚Š
- ãƒªãƒ¢ãƒ¼ãƒˆå®Ÿè¡Œå¯èƒ½
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«

**ä½¿ç”¨ä¾‹**:
```json
{
  "mcpServers": {
    "remote-api": {
      "type": "http",
      "url": "https://api.example.com/mcp",
      "timeout": 120000
    }
  }
}
```

### ãƒªãƒ¢ãƒ¼ãƒˆMCPã®æœ€é©åŒ–

**v1.16.0ã®æ–°æ©Ÿèƒ½**: ãƒªãƒ¢ãƒ¼ãƒˆMCPã‚µãƒãƒ¼ãƒˆ

#### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®è€ƒæ…®

```json
{
  "mcpServers": {
    "remote-api": {
      "type": "http",
      "url": "https://api.example.com/mcp",
      "timeout": 180000,        // ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚’è€ƒæ…®
      "keepAlive": true,        // æ¥ç¶šã‚’ç¶­æŒ
      "maxSockets": 10          // æ¥ç¶šãƒ—ãƒ¼ãƒ«
    }
  }
}
```

#### ãƒãƒƒãƒå‡¦ç†ã®æ´»ç”¨

```json
{
  "mcpServers": {
    "batch-api": {
      "type": "http",
      "url": "https://api.example.com/mcp",
      "batchSize": 10,          // ãƒãƒƒãƒã‚µã‚¤ã‚º
      "batchDelay": 100         // ãƒãƒƒãƒé–“ã®é…å»¶
    }
  }
}
```

### ä¸€æ™‚çš„ãªç„¡åŠ¹åŒ–

```json
{
  "mcpServers": {
    "temporary-disabled": {
      "command": "node",
      "args": ["server.js"],
      "disabled": true          // ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
    }
  }
}
```

**åŠ¹æœ**:
- ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®å‰Šæ¸›
- èµ·å‹•æ™‚é–“ã®çŸ­ç¸®
- ãƒ‡ãƒãƒƒã‚°ã®ç°¡ç´ åŒ–

---

## ğŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æœ€é©åŒ–

### ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†

#### ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

```bash
# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚ºã‚’ç¢ºèª
du -h /run/user/$(id -u)/qlog/

# å¤ã„ãƒ­ã‚°ã‚’å‰Šé™¤
find /run/user/$(id -u)/qlog/ -name "*.log" -mtime +7 -delete

# ãƒ­ã‚°ã‚’åœ§ç¸®
gzip /run/user/$(id -u)/qlog/*.log.old
```

#### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã®èª¿æ•´

```bash
# æœ¬ç•ªç’°å¢ƒ: ERRORã®ã¿
export Q_LOG_LEVEL=error

# é–‹ç™ºç’°å¢ƒ: DEBUGãƒ¬ãƒ™ãƒ«
export Q_LOG_LEVEL=debug

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: INFO
unset Q_LOG_LEVEL
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ç®¡ç†

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚µã‚¤ã‚ºã®ç¢ºèª

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚µã‚¤ã‚º
du -sh ~/.cache/amazon-q/

# è©³ç´°è¡¨ç¤º
du -h ~/.cache/amazon-q/ | sort -h
```

#### å®šæœŸçš„ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm -rf ~/.cache/amazon-q/*

# Q CLIã‚’å†èµ·å‹•
q restart
```

---

## ğŸ› ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ä¸€èˆ¬çš„ãªå•é¡Œ

#### å•é¡Œ1: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒé…ã„

**ç—‡çŠ¶**:
- ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã«æ™‚é–“ãŒã‹ã‹ã‚‹
- ãƒãƒ£ãƒƒãƒˆã®å¿œç­”ãŒé…ã„

**è¨ºæ–­**:
```bash
# 1. ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡ã‚’ç¢ºèª
q settings chat.enableContextUsageIndicator true

# 2. ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’ä¸Šã’ã¦è©³ç´°ã‚’ç¢ºèª
Q_LOG_LEVEL=debug q chat "test"

# 3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª
ping api.amazonq.aws
```

**è§£æ±ºç­–**:
```bash
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åœ§ç¸®
> /compact

# MCPã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å»¶é•·
q settings mcp.initTimeout 180000

# ä¸è¦ãªMCPã‚µãƒ¼ãƒãƒ¼ã‚’ç„¡åŠ¹åŒ–
# Agentè¨­å®šã§ "disabled": true
```

#### å•é¡Œ2: ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¤šã„

**ç—‡çŠ¶**:
- ã‚·ã‚¹ãƒ†ãƒ ãŒé‡ããªã‚‹
- ã‚¹ãƒ¯ãƒƒãƒ—ãŒç™ºç”Ÿ

**è¨ºæ–­**:
```bash
# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ç¢ºèª
ps aux | grep q | awk '{print $6}'

# Knowledge Baseã®ã‚µã‚¤ã‚ºã‚’ç¢ºèª
du -sh ~/.local/share/amazon-q/knowledge/
```

**è§£æ±ºç­–**:
```bash
# Knowledge Baseã‚’æœ€é©åŒ–
q settings knowledge.indexType "bm25"
q settings knowledge.maxFiles 1000

# ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
q settings knowledge.defaultExcludePatterns '[
  "**/node_modules/**",
  "**/.git/**"
]'

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm -rf ~/.cache/amazon-q/*
```

#### å•é¡Œ3: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒã™ãã«æº€æ¯ã«ãªã‚‹

**ç—‡çŠ¶**:
- é »ç¹ã«åœ§ç¸®ãŒå¿…è¦
- é•·ã„ä¼šè©±ãŒã§ããªã„

**è¨ºæ–­**:
```bash
# ä½¿ç”¨ç‡ã‚’ç¢ºèª
q settings chat.enableContextUsageIndicator true

# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨çŠ¶æ³ã‚’ç¢ºèª
> /usage
```

**è§£æ±ºç­–**:
```bash
# è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–
q settings chat.disableAutoCompaction false

# Markdownãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç„¡åŠ¹åŒ–ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³å‰Šæ¸›ï¼‰
q settings chat.disableMarkdownRendering true

# ä¸è¦ãªå±¥æ­´ã‚’ã‚¯ãƒªã‚¢
> /clear
```

### è¨ºæ–­æ–¹æ³•

#### ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
grep ERROR /run/user/$(id -u)/qlog/qchat.log

# è­¦å‘Šãƒ­ã‚°ã‚’ç¢ºèª
grep WARN /run/user/$(id -u)/qlog/qchat.log

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é–¢é€£ãƒ­ã‚°
grep "slow\|timeout\|latency" /run/user/$(id -u)/qlog/qchat.log
```

#### è¨­å®šã®ç¢ºèª

```bash
# å…¨è¨­å®šã‚’è¡¨ç¤º
q settings list

# ç‰¹å®šã®è¨­å®šã‚’ç¢ºèª
q settings knowledge.maxFiles
q settings mcp.initTimeout
q settings chat.disableAutoCompaction
```

#### ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®ç¢ºèª

```bash
# CPUä½¿ç”¨ç‡
top -p $(pgrep -f "q chat")

# ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
ps aux | grep "q chat"

# ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡
du -sh ~/.local/share/amazon-q/
du -sh ~/.cache/amazon-q/
```

---

## âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å®šæœŸçš„ãªæ¸¬å®š

- [ ] ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä½¿ç”¨ç‡ã‚’ç›£è¦–
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’æ¸¬å®š
- [ ] ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ç¢ºèª
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ã‚’ç¢ºèª

### è¨­å®šã®è¦‹ç›´ã—

- [ ] Knowledge Baseè¨­å®šã‚’æœ€é©åŒ–
- [ ] MCPã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’èª¿æ•´
- [ ] è‡ªå‹•ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹åŒ–
- [ ] ä¸è¦ãªMCPã‚µãƒ¼ãƒãƒ¼ã‚’ç„¡åŠ¹åŒ–

### ãƒªã‚½ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

- [ ] å¤ã„ãƒ­ã‚°ã‚’å‰Šé™¤
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
- [ ] ä¸è¦ãªKnowledge Baseãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–
- [ ] ä¼šè©±å±¥æ­´ã‚’æ•´ç†

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[è¨­å®šé …ç›®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](../07_reference/03_settings-reference.md)** - å…¨è¨­å®šé …ç›®ã®è©³ç´°
- **[Agentè¨­å®šã‚¬ã‚¤ãƒ‰](../03_configuration/03_agent-configuration.md)** - Agentè¨­å®šã®è©³ç´°
- **[MCPè¨­å®šã‚¬ã‚¤ãƒ‰](../03_configuration/04_mcp-configuration.md)** - MCPã‚µãƒ¼ãƒãƒ¼ã®è¨­å®š
- **[ç’°å¢ƒå¤‰æ•°ã‚¬ã‚¤ãƒ‰](../03_configuration/06_environment-variables.md)** - ç’°å¢ƒå¤‰æ•°ã®ä½¿ã„æ–¹
- **[ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](../06_troubleshooting/02_common-issues.md)** - ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•
- **[è¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](01_configuration.md)** - å…¨èˆ¬çš„ãªè¨­å®šã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- **[ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](02_security.md)** - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

---

**ä½œæˆæ—¥**: 2025-10-11  
æœ€çµ‚æ›´æ–°: %Y->-  
**å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.17.0ä»¥é™
---

**é–¢é€£ãƒˆãƒ”ãƒƒã‚¯**:
- [ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•](../06_troubleshooting/02_common-issues.md)
- [FAQ](../06_troubleshooting/01_faq.md)
