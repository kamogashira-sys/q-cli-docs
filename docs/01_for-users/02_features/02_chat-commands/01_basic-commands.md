[ホーム](../../../README.md) > [ユーザーガイド](../../README.md) > [機能ガイド](../README.md) > [チャット機能](../01_chat.md) > 基本コマンド・会話管理

---

# 基本コマンド・会話管理

**対象バージョン**: v1.13.0以降

## 📋 コマンド概要

Q CLIチャットセッションで使用する基本的なコマンドと会話管理機能です。これらのコマンドは、チャットの基本操作、セッション管理、会話の保存・復元を行います。

## 🚀 基本的な使い方

### 基本コマンド一覧

| コマンド | 詳細説明 | 使用シーン |
|---------|---------|-----------|
| `/help [コマンド名]` | チャット内コマンドのヘルプを表示。コマンド名を指定すると、そのコマンドの詳細ヘルプを表示 | コマンドの使い方を忘れた時、利用可能なコマンドを確認したい時、特定のコマンドの詳細を知りたい時 |
| `/quit` | チャットセッションを終了してターミナルに戻る。会話履歴は保存される | 作業を終了する時、別のタスクに切り替える時 |
| `/exit` | チャットセッションを終了してターミナルに戻る（`/quit`と同じ） | 作業を終了する時、別のタスクに切り替える時 |
| `/clear` | 現在の会話履歴をクリア。新しい話題を始める時に便利 | 会話が長くなりすぎた時、全く別の話題に切り替える時 |
| `/paste` | クリップボードから画像を貼り付け | 画像をチャットに追加したい時、スクリーンショットを共有したい時 |

### 会話管理コマンド一覧

| コマンド | 詳細説明 | 使用シーン |
|---------|------|-----------|
| `/save <パス> [オプション]` | 現在の会話をJSONファイルに保存。`-f`オプションで既存ファイルを上書き可能 | 重要な会話を記録したい時、後で参照したい会話を保存する時 |
| `/load <パス>` | 保存した会話をファイルから読み込んで復元。過去の会話を継続できる | 以前の会話を再開したい時、別のセッションで保存した会話を引き継ぐ時 |
| `/tangent [サブコマンド]` | （Beta）Tangentモード（会話の分岐）に入る/戻る。`tail`サブコマンドで最後のエントリを保持して終了。要設定: `q settings chat.enableTangentMode true` | メインの会話を保持したまま、別の話題を試したい時 |

### 基本例

```bash
# ヘルプの確認
/help

# 特定のコマンドのヘルプ
/help save

# 会話の保存
/save ./important_conversation.json

# 会話の読み込み
/load ./important_conversation.json

# 画面クリア
/clear
```

## ⚙️ オプション・引数

### `/help` コマンド

| 引数 | 説明 | 必須 |
|------|------|------|
| `[コマンド名]` | 詳細ヘルプを表示するコマンド名 | いいえ |

### `/save` コマンド

| 引数・オプション | 説明 | 必須 |
|-----------------|------|------|
| `<パス>` | 保存先のファイルパス（JSON形式） | はい |
| `-f, --force` | 既存ファイルを上書き | いいえ |

### `/load` コマンド

| 引数 | 説明 | 必須 |
|------|------|------|
| `<パス>` | 読み込むファイルパス（JSON形式） | はい |

### `/tangent` コマンド

| サブコマンド | 説明 | 必須 |
|-------------|------|------|
| `[なし]` | Tangentモードに入る | いいえ |
| `tail` | 最後のエントリを保持して終了 | いいえ |

### `/paste` コマンド

画像形式のサポート:
- PNG
- JPEG
- GIF
- WebP

制限事項:
- 最大ファイルサイズ: 10MB
- 最大画像数: 10枚まで

## 💡 実用例

### 例1: 基本的なセッション管理

**シナリオ**: 新しいプロジェクトでQ CLIを使い始める

```bash
# 利用可能なコマンドを確認
/help

# 作業開始
"新しいReactアプリケーションを作成したい"

# 重要な会話を保存
/save ./react_project_setup.json

# 作業終了
/quit
```

**結果**: 基本的なワークフローを理解し、重要な会話を保存できる

### 例2: 会話の継続と分岐

**シナリオ**: 以前の会話を継続し、別のアイデアも試したい

```bash
# 以前の会話を復元
/load ./react_project_setup.json

# メインの話題を継続
"先ほどのReactアプリにTypeScriptを追加したい"

# 別のアイデアを試すためにTangentモードに入る
/tangent
"代わりにNext.jsを使った場合はどうなる？"

# メインの会話に戻る
/tangent tail
```

**結果**: メインの会話を保持しながら、別のアプローチを検討できる

### 例3: 画像を使った質問

**シナリオ**: エラー画面のスクリーンショットについて質問したい

```bash
# 画像を貼り付け（クリップボードから）
/paste

# 画像について質問
"このエラーメッセージの意味と解決方法を教えて"

# 解決策を保存
/save ./error_resolution.json
```

**結果**: 視覚的な情報を含めた効果的な問題解決ができる

## 🔧 トラブルシューティング

### よくある問題

#### 問題1: `/save` でファイルが保存できない

**症状**: "Permission denied" や "File already exists" エラーが発生

**原因**: ファイル権限の問題、または既存ファイルの上書き保護

**解決策**:
```bash
# 強制上書きオプションを使用
/save ./conversation.json -f

# 別のパスに保存
/save ~/Documents/conversation.json
```

#### 問題2: `/load` で会話が正しく復元されない

**症状**: 会話履歴が部分的にしか表示されない、または形式エラー

**原因**: JSONファイルの破損、または異なるバージョンでの保存

**解決策**:
```bash
# ファイルの内容を確認
cat ./conversation.json | head -20

# 新しいセッションで再試行
/clear
/load ./conversation.json
```

#### 問題3: `/tangent` が使用できない

**症状**: "Unknown command" エラーが発生

**原因**: Tangentモードが有効化されていない

**解決策**:
```bash
# チャットを終了してTangentモードを有効化
/quit
q settings chat.enableTangentMode true

# 再度チャットを開始
q chat
```

#### 問題4: `/paste` で画像が貼り付けられない

**症状**: 画像が表示されない、またはエラーメッセージが表示される

**原因**: サポートされていない画像形式、またはファイルサイズ制限

**解決策**:
```bash
# サポートされている形式に変換（PNG, JPEG, GIF, WebP）
# ファイルサイズを10MB以下に縮小
# クリップボードに正しく画像がコピーされているか確認
```

#### 問題5: コマンドが認識されない

**症状**: "Unknown command" エラーが頻繁に発生

**原因**: コマンドの入力ミス、またはバージョンの違い

**解決策**:
```bash
# 利用可能なコマンドを確認
/help

# Q CLIのバージョンを確認
/quit
q --version
```

## 🔗 関連コマンド

- [コンテキスト管理](02_context-management.md) - `/context`、`/compact`、`/hooks`コマンド
- [プロンプト管理](03_prompt-management.md) - `/prompts`、`/editor`コマンド
- [開発者向けコマンド](08_developer-commands.md) - `/usage`、`/experiment`コマンド

## 📖 参照元

- [チャット機能概要](../01_chat.md#基本コマンド) - 基本コマンドの概要
- [チャット機能概要](../01_chat.md#会話管理) - 会話管理機能の概要

---

最終更新: 2025年11月13日
