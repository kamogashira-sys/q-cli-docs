# オートコンプリート機能

最終更新: 2025-10-15  
**ステータス**: ✅ **実装済み（Tab補完）**

---

## 📋 概要

Q CLIには**Tab補完機能**が実装されており、チャット内で効率的な入力をサポートします。

---

## 🚀 実装済み機能

### 1. スラッシュコマンド補完

チャット内で`/`を入力後、Tabキーを押すとコマンド候補が表示されます。

**使用方法**:
```bash
# チャット内で
> /ag[Tab]
# → /agent が補完される

> /con[Tab]
# → /context が補完される
```

**対応コマンド**:
- `/agent`, `/context`, `/knowledge`, `/help`, `/quit`など
- 全スラッシュコマンドに対応

---

### 2. ファイルパス補完

ファイルパスを入力中にTabキーを押すと、パス候補が表示されます。

**使用方法**:
```bash
# チャット内で
> このファイルを確認して: ./src/ma[Tab]
# → ./src/main.py が補完される

> README.mdを読んで: ~/proj[Tab]
# → ~/projects/ が補完される
```

**特徴**:
- ✅ 相対パス・絶対パス両方に対応
- ✅ ディレクトリ・ファイル両方を補完
- ✅ ホームディレクトリ（`~`）にも対応

---

### 3. プロンプト補完（@記法）

`@`を使ったプロンプト参照で補完が利用できます。

**使用方法**:
```bash
# チャット内で
> @my[Tab]
# → 保存済みプロンプトの候補が表示される
```

---

### 4. コマンド選択メニュー（Ctrl+S）

`Ctrl+S`を押すと、全55個のコマンドから選択できます。

**使用方法**:
1. チャット内で`Ctrl+S`を押す
2. 矢印キー（`↑` / `↓`）で移動
3. `Enter`キーで選択確定

**表示されるコマンド例**:
- `/agent`, `/agent create`, `/agent swap`
- `/context`, `/context add`, `/context show`
- `/knowledge`, `/help`, `/quit`など

---

## 🔧 実装詳細

### 技術スタック
- **ライブラリ**: rustyline v15.0.0
- **実装ファイル**: `crates/chat-cli/src/cli/chat/prompt.rs`

### 補完の種類

| 補完タイプ | トリガー | 実装 |
|-----------|---------|------|
| コマンド補完 | `/` + Tab | ChatCompleter |
| パス補完 | ファイルパス + Tab | PathCompleter |
| プロンプト補完 | `@` + Tab | PromptCompleter |
| コマンド選択 | Ctrl+S | SkimCommandSelector |

---

## ⚠️ 未実装機能

以下の機能は現在実装されていません：

### ❌ q inlineコマンド

`q inline`コマンドは存在しません。

### ❌ 外部CLIツールのオートコンプリート

以下のような外部CLIツールに対するオートコンプリートは未実装：
- git, docker, kubectl, aws, npm, など

**現状**: Q CLI内部のコマンド（スラッシュコマンド）のみ補完可能

---

## 💡 使い方のTips

### 効率的な入力

1. **スラッシュコマンドは最初の数文字 + Tab**
   ```
   /ag[Tab] → /agent
   /con[Tab] → /context
   ```

2. **ファイルパスは途中まで入力 + Tab**
   ```
   ./src/m[Tab] → ./src/main.py
   ```

3. **コマンドが思い出せない時はCtrl+S**
   - 全コマンドから選択可能

---

## 📚 関連ドキュメント

- [チャット機能](01_chat.md) - 基本的な使い方
- [キーボードショートカット](../01_getting-started/03_first-steps.md#-キーボードショートカット)
- [コマンドリファレンス](../07_reference/02_commands.md)

---

**作成日**: 2025-10-11  
最終更新: 2025-10-15
---

**関連トピック**:
- [よくある問題と解決方法](../06_troubleshooting/02_common-issues.md)
- [FAQ](../06_troubleshooting/01_faq.md)
