# Amazon Q CLI バージョンアップ履歴 (v1.13.0 - v1.17.0)

**調査日**: 2025-10-08  
**対象バージョン**: v1.13.0 ～ v1.17.0  
**リリース期間**: 2025-07-31 ～ 2025-09-29

## 概要

この期間で4つのメジャー/マイナーバージョンがリリースされました。主な変更点は以下の通りです：

- **Agent機能の大幅強化**: 設定スキーマ、管理コマンド、バリデーション機能の追加
- **MCP (Model Context Protocol) の進化**: リモートMCP対応、OAuth認証、rmcpへの移行
- **Knowledge機能のベータ改善**: BM25サポート、非同期クライアントのリファクタリング
- **ユーザー体験の向上**: コンテキスト使用率表示、チェックポイント機能、プロンプト管理強化
- **セキュリティ強化**: execute_bash権限の厳格化、fs_read信頼範囲の制限

---

## v1.17.0 (2025-09-29)

### 主要機能追加

#### チェックポイント機能
- Git CLIコマンドを使用したチェックポイント機能の追加 (#2896)
- 作業状態の保存と復元が可能に

#### コンテキスト使用率表示
- プロンプトにコンテキスト使用率のパーセンテージインジケーターを追加 (#2994)
- トークン使用量の可視化により、コンテキスト管理が容易に

#### プロンプト管理の強化
- `/prompts`コマンドのサポート拡張 (#2799)
- MCPプロンプト管理のUX改善 (#2953)

### MCP関連の改善

- OAuth関連の問題修正 (#2925, #2929)
  - クライアントIDのハードコード対応 (#2976)
  - トークンリフレッシュの問題解決
- ツール入力パースの問題修正 (#2986)

### その他の改善

- ディスパッチ失敗時のエラーメッセージ改善 (#2969)
- ツール権限ロジックの統合による一貫した表示と実行 (#2975)
- フィードの更新 (#2998, #3005)

### 技術的変更

- PR数: 14件
- 主要コントリビューター: @kensave, @dingfeli, @evanliu048, @abhraina-aws, @jlhood

---

## v1.16.0 (2025-09-17)

### 主要機能追加

#### リモートMCP対応
- リモートMCPサーバーのサポート有効化 (#2836)
- OAuth認証の統合 (#2849, #2878, #2879, #2880)
- 認証情報の適切な管理とリフレッシュ機能

#### Agent機能の拡張
- カスタムAgentフォーマットへの`model`フィールドサポート追加 (#2815)
- Agent編集サブコマンドの追加 (#2845, #2854)
- デフォルトAgentリソースへのAGENTS.mdの追加 (#2812)

#### 履歴管理の改善
- ファイルストレージを使用した永続的なCLI履歴の実装 (#2769)
- `/tangent tail`コマンドで最後のtangent会話を保持 (#2838)

#### 自動アナウンス機能
- `/whatsnew`コマンドによる自動アナウンス機能の追加 (#2833)
- 日次ハートビートテレメトリの追加 (#2839)

### セキュリティ強化

- `execute_bash`の危険なパターンに`$`を追加 (#2811)
- `autoAllowReadonly`設定のデフォルトをfalseに変更（セキュリティ向上） (#2846)
- `fs_read`の信頼権限を現在の作業ディレクトリのみに制限 (#2824)

### MCP関連の改善

- rmcpへの移行 (#2700)
- MCPサーバー設定の`--args`パラメータでカンマを含む引数のサポート (#2754)
- キャッシュディレクトリ作成時のパニック修正 (#2857)
- 古い/リフレッシュ不可能な認証情報の削除 (#2880)

### ドキュメント改善

- introspect用のtodo listドキュメント更新 (#2776)
- tangent & introspectドキュメントの追加 (#2775)
- ローカルAgentディレクトリパスの修正 (#2749)
- トレースログ位置への無効なポインタ修正 (#2734)

### その他の改善

- 会話クリア時のサマリ保持を無効化 (#2793)
- チャットの行折り返し設定を追加 (#2816)
- 依存関係の更新: bm25をv2.3.2に更新 (#2872)
- Agentコンフィグスキーマの更新 (#2891)

### 新規コントリビューター

7名の新規コントリビューターが参加:
- @jmmoser, @mr-lee, @erbenmo, @yayami3, @BartVB, @ennio1991, @harleylrn

### 技術的変更

- PR数: 40件以上
- バージョン: v1.16.0

---

## v1.14.0 (2025-08-18)

### 主要機能追加

#### Knowledge機能のベータ改善

- **フェーズ1** (#2545):
  - Knowledge機能の全般的な改善
  - ユーザビリティの向上

- **フェーズ2** (#2608):
  - 非同期クライアントのリファクタリング
  - BM25サポートの追加
  - 検索精度の向上

#### モデル管理の改善

- バックエンドAPIの統合とハードコードされたモデルオプションの削除 (#2419)
- 後方互換性のためのクライアント側modelNameマッピング追加 (#2604)
- リージョン固有のフォールバックモデル追加（iad、fra） (#2615)
- フォールバックモデルの変更、全クライアントとの整合性確保 (#2624)

### ユーザー体験の向上

- リトライ通知のための遅延追跡インターセプターの追加 (#2607)
- `execute_bash`の読み取り専用チェックに追加の安全性チェック (#2605)

### バグ修正

- Agent: ツール権限オーバーライドの問題修正 (#2606) → 後にリバート (#2618)
- `use_aws`がデフォルトプロファイルを使用していない時の表示問題修正 (#2617)
- Agentドキュメントのマイナー更新

### 技術的変更

- PR数: 11件
- バージョン: v1.14.0

---

## v1.13.0 (2025-07-31)

### 主要機能追加

#### Agent機能の本格導入

- **Persona有効化** (#2222):
  - Agent（旧Profile）機能の正式リリース
  - カスタマイズ可能なAIアシスタントの設定

- **Agentスキーマ** (#2273):
  - 標準化されたAgent設定フォーマット
  - バリデーション機能の追加 (#2357)

- **Agent管理コマンド** (#2307):
  - ルートおよびスラッシュサブコマンド: list, create, rename
  - ユーザー定義デフォルトの設定機能 (#2420)
  - マイグレーション機能 (#2418)

- **MCP JSON後方互換性** (#2292):
  - 既存のmcp.json設定との互換性維持
  - スムーズな移行パスの提供

#### ファイル操作の強化

- `fs_read`ツールでのバッチファイル読み取りサポート (#2223)
- 複数ファイルの効率的な処理が可能に

#### ユーザー体験の改善

- クォータ超過エラーメッセージの改善 (#2263)
- モデル利用不可メッセージの改訂（対話/非対話モード両方） (#2262)
- 履歴ヒントのブール設定追加 (#2298)
- `/compact`コマンドの問題修正 (#2272)
- 大きなメッセージでの`/compact`バグ修正 (#2375)

#### テレメトリとメトリクス

- スラッシュコマンド実行のテレメトリイベント追加 (#2285, #2305)
- リクエストメタデータの会話履歴とテレメトリへの追加 (#2313)
- ユーザーターンメトリクスの追加 (#2388)
- Agent設定とツール実行タイミングのテレメトリ (#2400)

#### モデル管理

- claude-3.5-sonnetモデルの削除（非推奨の可能性） (#2286)
- キャパシティ到達時の別モデル選択プロンプト (#2360)
- モデル過負荷エラーの更新 (#2396)
- Amazonクライアントの更新（getUsageLimits API対応） (#2359, #2364, #2408)

### セキュリティとバリデーション

- `execute_bash`の潜在的な不要実行に対する権限修正 (#2387)
- コードブロック検出の改善（MultiLineValidator） (#2384)

### ドキュメント

- Agent、Knowledge、Toolsのドキュメント追加 (#2282, #2299, #2300, #2303)
- Agent起動時のブロッキング変更 (#2340)
- Agentドキュメントの更新 (#2367)
- イントロの明確化 (#2374)

### その他の機能

- 環境変数`USER_PROMPT`の追加とサニタイズ機能 (#2244)
- 会話ロード機能の復活 (#2250)
- ターミナルベンチマーク手動トリガーGitHub Action (#2312)
- チャット履歴への画像の含有 (#2333)
- Markdownレンダリング無効化設定の実装 (#2236)
- プロンプトキャッシング修正とドキュメント参照追加 (#2421)
- アダプティブレート制限のためのリトライ分類器実装 (#2427) → 後にリバート (#2431)

### バグ修正

- マージエラーの修正（fs_read） (#2225)
- 不要なprintの削除 (#2227)
- マイグレーションワークフローがホームディレクトリとcwdを区別しない問題 (#2245)
- スラッシュコマンドがAgentの変更を反映しない問題 (#2247)
- ビルドスクリプトの古いスクリプト名参照 (#2257)
- Linuxでのビルドスクリプト（バイナリのみをzip） (#2275)
- プロファイルフラグ非推奨の警告メッセージの色付け (#2279)
- `/context`サブコマンドのコピー変更 (#2278)
- Agentフォールバック動作 (#2281)
- マイグレーション時のMCPサーバーからの全ツール追加 (#2283)
- スラッシュコマンド作成後のAgent表示問題 (#2399)
- ローカルAgentが誤ったローカルパスから取得される問題 (#2398)
- Agent名がオプションにならない問題 (#2410)
- ドキュメントからMCPサーバーのdisabledフィールド削除 (#2416)
- スラッシュコマンドでのプロファイル言及のクリーンアップ (#2422)
- ディレクトリ変更 (#2426)
- 常にダミーツールを含める (#2433)
- Agent renameの削除 (#2434)
- プロファイル言及の削除 (#2436)

### 新規コントリビューター

6名の新規コントリビューターが参加:
- @raghavchawla, @syaamkhan, @arjun37602, @mschrage, @aws-mbcohn, @alex-bellomo

### 技術的変更

- PR数: 70件以上
- バージョン: v1.13.0
- スキーマの追加 (#2437, #2439)

---

## バージョン間の主要な変更トレンド

### 1. Agent機能の成熟化

- **v1.13.0**: Agent機能の基盤構築（スキーマ、管理コマンド、バリデーション）
- **v1.16.0**: Agent編集機能、modelフィールドサポート
- **v1.17.0**: Agent機能の安定化と統合

### 2. MCP (Model Context Protocol) の進化

- **v1.13.0**: MCP JSON後方互換性の確保
- **v1.14.0**: 基盤の安定化
- **v1.16.0**: rmcpへの移行、リモートMCP対応、OAuth認証
- **v1.17.0**: OAuth問題の修正、安定性向上

### 3. Knowledge機能の強化

- **v1.14.0**: ベータ改善フェーズ1・2（BM25サポート、非同期クライアント）
- 以降のバージョンで安定化

### 4. セキュリティの段階的強化

- **v1.13.0**: execute_bash権限の初期修正
- **v1.16.0**: autoAllowReadonlyのデフォルト変更、fs_read信頼範囲の制限
- セキュリティファーストのアプローチが明確に

### 5. ユーザー体験の継続的改善

- エラーメッセージの改善（全バージョン）
- コンテキスト使用率表示（v1.17.0）
- 履歴管理の強化（v1.16.0）
- チェックポイント機能（v1.17.0）

---

## 統計情報

| バージョン | リリース日 | PR数（概算） | 新規コントリビューター |
|-----------|-----------|-------------|---------------------|
| v1.13.0   | 2025-07-31 | 70+         | 6名                 |
| v1.14.0   | 2025-08-18 | 11          | 0名                 |
| v1.16.0   | 2025-09-17 | 40+         | 7名                 |
| v1.17.0   | 2025-09-29 | 14          | 0名                 |

**合計**: 135+ PRs、13名の新規コントリビューター

---

## 主要コントリビューター

- @dingfeli: Agent機能、MCP関連
- @evanliu048: モデル管理、テレメトリ
- @brandonskiser: セキュリティ、ビルド
- @kensave: Knowledge機能、全般的な改善
- @chaynabors: ドキュメント、Agent機能
- @kkashilk: ユーザー体験、リトライロジック
- @abhraina-aws: コンテキスト管理、自動アナウンス

---

## 今後の注目ポイント

1. **Agent機能のさらなる拡張**: カスタマイズ性の向上
2. **MCP生態系の成長**: より多くのリモートサーバー対応
3. **Knowledge機能の正式リリース**: ベータからの卒業
4. **セキュリティ機能の継続的強化**: 企業利用への対応
5. **パフォーマンス最適化**: 大規模プロジェクトでの使用性向上

---

## 参考リンク

- [GitHub Repository](https://github.com/aws/amazon-q-developer-cli)
- [Full Changelog v1.13.0](https://github.com/aws/amazon-q-developer-cli/compare/v1.10.1...v1.13.0)
- [Full Changelog v1.14.0](https://github.com/aws/amazon-q-developer-cli/compare/v1.13.3...v1.14.0)
- [Full Changelog v1.16.0](https://github.com/aws/amazon-q-developer-cli/compare/v.1.15.0...v1.16.0)
- [Full Changelog v1.17.0](https://github.com/aws/amazon-q-developer-cli/compare/v1.16.2...v1.17.0)

---

**ドキュメント作成日**: 2025-10-08  
**最終更新**: 2025-10-08
