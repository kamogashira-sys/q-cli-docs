# Kiro CLI マルチセッション機能（Multi-Session Support）

**出典**: [【Kiro CLI v1.23.0】マルチセッション機能のご紹介](https://zenn.dev/aws_japan/articles/a269822914d365) - Zenn記事 by konippi

## 概要

Kiro CLI v1.23.0（2025年12月18日リリース）で追加されたマルチセッション機能について詳細に解説します。この機能により、複数のチャットセッションを効率的に管理し、過去の会話をいつでも再開できるようになりました。セッションピッカーによるインタラクティブな選択により、会話セッションを自由に操作できます。

## 📋 Zenn記事の詳細内容確認

### v1.23.0のマルチセッション機能の詳細

#### 主要な機能・特徴

1. **マルチセッション機能の本質**
   - すべてのチャットセッションを会話のターンごとに自動保存
   - 起動したディレクトリごとにセッションを保存
   - プロジェクトやディレクトリを移動しても独立したセッション履歴を保持

2. **v1.23.0で追加された主な機能**
   - **セッションピッカー**: インタラクティブなUIで過去のセッションを選択可能
   - **セッション一覧表示**: セッション名、最終更新日時、メッセージプレビューを確認

3. **コマンドラインからの操作**
   - セッションピッカーを開く: `kiro-cli chat --resume-picker`
   - 最新のセッションを再開: `kiro-cli chat --resume` / `-r`
   - セッション一覧を表示: `kiro-cli chat --list-sessions` / `-l`
   - セッションを削除: `kiro-cli chat --delete-session <SESSION_ID>` / `-d`

4. **チャットセッション内からの操作**
   - セッションピッカーを開く: `/chat resume`
   - セッションをファイルに保存: `/chat save <FILE_PATH>`
   - ファイルからセッションを読み込む: `/chat load <FILE_PATH>`

5. **効果的な使い方のポイント**
   - プロジェクトごとにセッションを管理
   - 重要なセッションはファイルに保存
   - セッションピッカーを活用

6. **セッション情報の構成**
   - セッションID（一意なUUID形式の識別子）
   - セッションの最終更新日時
   - チャットセッションの最初のメッセージ
   - そのセッション内のメッセージ数

## マルチセッション機能詳細

### 基本概念

Kiro CLIは、すべてのチャットセッションを会話のターンごとに自動保存します。セッションは**起動したディレクトリごとに**保存されるため、プロジェクトやディレクトリを移動しても、それぞれの場所で独立したセッション履歴を保持できます。

### 自動保存機能

- **ターンごとの自動保存**: 各会話のやり取りが自動的に保存される
- **ディレクトリベース**: 起動したディレクトリごとに独立したセッション管理
- **永続化**: セッション情報は永続的に保存され、いつでも再開可能

### セッション管理の新機能

v1.23.0で追加されたセッション管理の主な機能：

#### セッションピッカー
- インタラクティブなUIで過去のセッションを選択可能
- セッション名、最終更新日時、メッセージプレビューを表示
- 直感的な操作でセッションの選択・再開・削除が可能

#### セッション一覧表示
- セッション情報の包括的な表示
- 最近更新されたセッションが最初に表示
- セッションの概要を一目で把握可能

## コマンドラインからの操作

### セッションピッカーを開く
```bash
kiro-cli chat --resume-picker
```

インタラクティブなセッションピッカーを起動して、過去のセッションから選択できます。

**特徴**:
- 視覚的なセッション選択
- セッション詳細のプレビュー
- 直感的な操作インターフェース

### 最新のセッションを再開
```bash
kiro-cli chat --resume
# 短縮形
kiro-cli chat -r
```

現在のディレクトリで最後に使用したセッションを再開します。

**用途**:
- 前回の作業の継続
- 迅速なセッション復帰
- 作業フローの中断・再開

### セッション一覧を表示
```bash
kiro-cli chat --list-sessions
# 短縮形
kiro-cli chat -l
```

カレントディレクトリに保存されているすべてのセッションを一覧表示します。

**表示内容**:
- **セッションID**: 一意なUUID形式の識別子
- **最終更新日時**: セッションの最後の活動時刻
- **最初のメッセージ**: チャットセッションの開始メッセージ
- **メッセージ数**: そのセッション内の総メッセージ数

**表示順序**: 最近更新されたセッションが最初に表示

### セッションを削除
```bash
kiro-cli chat --delete-session <SESSION_ID>
# 短縮形
kiro-cli chat -d <SESSION_ID>
```

特定のセッションをIDで削除します。

**削除手順**:
1. `kiro-cli chat --list-sessions`でセッション一覧を表示
2. 削除対象のセッションIDをコピー
3. コピーしたセッションIDを使用して削除実行

**実行例**:
```bash
kiro-cli chat --delete-session cc66b312-549e-4677-b9d0-508f9e37a964
✔ Deleted chat session cc66b312-549e-4677-b9d0-508f9e37a964
```

## チャットセッション内からの操作

チャットセッション中に`/chat`コマンドを使用してセッションを管理できます。

### セッションピッカーを開く
```
> /chat resume
```

チャットセッション内からインタラクティブなセッションピッカーを表示し、過去のセッションから選択できます。

### セッションをファイルに保存
```
> /chat save <FILE_PATH>
```

現在のセッションをJSONファイルとして保存します。

**使用例**:
```
> /chat save my-session.json
```

**用途**:
- 重要な会話のバックアップ
- チームメンバーとのセッション共有
- セッションのアーカイブ化

### ファイルからセッションを読み込む
```
> /chat load <FILE_PATH>
```

保存したファイルからセッションを復元します。`.json`拡張子は省略可能です。

**使用例**:
```
> /chat load my-session.json
> /chat load my-session
```

**用途**:
- バックアップしたセッションの復元
- 共有されたセッションの読み込み
- アーカイブからの復旧

## 効果的な使い方

### 1. プロジェクトごとにセッションを管理

セッションはディレクトリ単位で管理されるため、プロジェクトのルートディレクトリでKiro CLIを起動することで、そのプロジェクトに関連するセッションのみが表示されます。

**ベストプラクティス**:
- プロジェクトルートでKiro CLIを起動
- プロジェクト固有の会話履歴を維持
- 異なるプロジェクト間での会話の混在を防止

### 2. 重要なセッションはファイルに保存

特に重要な会話や、後で参照したいセッションは`/chat save`コマンドでファイルとして保存しておくことを推奨します。

**保存すべきセッション**:
- 重要な設計決定の議論
- 複雑な問題の解決過程
- チームで共有すべき知見
- 学習価値の高い会話

**メリット**:
- セッションのバックアップ
- チームメンバーとの共有
- 知識の蓄積・再利用

### 3. セッションピッカーを活用

`--resume-picker`オプションや`/chat resume`コマンドを使用すると、セッション名、最終更新日時、メッセージプレビューを確認しながら、適切なセッションを選択できます。

**活用場面**:
- 複数のセッションから適切なものを選択
- 過去の会話内容の確認
- 作業コンテキストの復元

## 実用的なユースケース

### プロジェクト開発での活用
```bash
# プロジェクトAのディレクトリで作業
cd /path/to/project-a
kiro-cli chat --resume-picker
# プロジェクトA関連のセッションのみ表示

# プロジェクトBのディレクトリで作業
cd /path/to/project-b
kiro-cli chat --resume-picker
# プロジェクトB関連のセッションのみ表示
```

### 重要な会話の保存・共有
```
> /chat save architecture-discussion.json
# 重要なアーキテクチャ議論を保存

> /chat save debugging-session.json
# デバッグセッションをバックアップ
```

### チーム間でのセッション共有
```bash
# チームメンバーAがセッションを保存
> /chat save team-planning.json

# チームメンバーBがセッションを読み込み
> /chat load team-planning.json
```

## セッション情報の構成

各セッションには以下の情報が含まれます：

### セッションID
- **形式**: UUID形式の一意な識別子
- **例**: `cc66b312-549e-4677-b9d0-508f9e37a964`
- **用途**: セッションの特定・削除時の指定

### 最終更新日時
- **形式**: タイムスタンプ
- **用途**: セッションの新しさの判断
- **表示**: 一覧表示時の並び順の基準

### 最初のメッセージ
- **内容**: チャットセッションの開始メッセージ
- **用途**: セッション内容の概要把握
- **表示**: セッション選択時のプレビュー

### メッセージ数
- **内容**: そのセッション内の総メッセージ数
- **用途**: セッションの規模・活発さの指標
- **表示**: セッション情報の一部として表示

## トラブルシューティング

### よくある問題と解決方法

#### セッションが見つからない
- **原因**: 異なるディレクトリで起動している
- **解決**: 正しいプロジェクトディレクトリで起動

#### セッション一覧が表示されない
- **原因**: そのディレクトリでセッションが作成されていない
- **解決**: 新しいチャットセッションを開始

#### セッションの削除ができない
- **原因**: セッションIDが正しくない
- **解決**: `--list-sessions`で正確なIDを確認

## まとめ

Kiro CLI v1.23.0のマルチセッション機能は、複数のチャットセッションを効率的に管理する革新的な機能です。この機能により：

- **自動セッション管理**: ターンごとの自動保存による履歴の永続化
- **ディレクトリベース管理**: プロジェクトごとの独立したセッション管理
- **インタラクティブ選択**: セッションピッカーによる直感的な操作
- **柔軟な保存・復元**: ファイルベースのセッション共有・バックアップ

特にプロジェクトベースの開発において、各プロジェクトの文脈を保持しながら効率的に作業を進めることができます。

この機能は、AI駆動開発における会話履歴の管理を体系化し、継続的で一貫した開発体験を提供する重要なアップデートです。
