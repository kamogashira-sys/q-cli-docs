# Q CLI 設定レベルの詳細

| レベル | 設定場所 | 制御項目 | 変更方法 | 優先度 |
|--------|----------|----------|----------|--------|
| **レベル1: 管理者設定（AWS側）** | AWS CodeWhisperer プロファイル | MCP機能の有効/無効 | 組織管理者がAWS側で設定 | 絶対優先（他の全設定を上書き） |
| **レベル2: コマンドライン引数** | q chatコマンドの引数 | Agent選択（--agent <NAME>） | コマンド実行時に指定 | データベース設定・ファイル設定より優先 |
| **レベル3: データベース設定** | ~/.local/share/amazon-q/settings.json | デフォルトAgent（chat.defaultAgent） | q settings chat.defaultAgent <NAME> | ファイル設定より優先 |
| **レベル4: ファイルベース設定** | Agent設定ファイル、レガシーMCP設定ファイル | MCP/Agent詳細設定 | JSONファイルを直接編集 | 次項の「MCP設定ファイルの優先順位」を参照 |
| **レベル5: デフォルト値** | Q CLIのソースコード | 全設定のデフォルト値 | 変更不可 | 最低（他の設定がない場合のみ使用） |

## 補足

- **レベル1**が最も優先度が高く、組織管理者がMCP機能を無効化している場合、他の全設定は無視されます
- **レベル2～5**は、上位レベルの設定が存在する場合、下位レベルの設定は使用されません
- **レベル4**の詳細な優先順位については、別途「MCP設定ファイルの優先順位」を参照してください
