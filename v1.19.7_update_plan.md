# Amazon Q CLI v1.19.7 対応作業計画書

**作成日**: 2025-12-14  
**対象バージョン**: v1.19.7  
**リリース日**: 2025-11-17T15:55:17Z  
**コミットハッシュ**: `cf39ab6297ee7654fcbeed253445d35fe5c92b07`  
**コミット日時**: 2025-11-15 11:51:47 -0800  

---

## 📋 バージョン情報

### ソースコード情報

- **バージョン**: v1.19.7
- **コミットハッシュ**: `cf39ab6297ee7654fcbeed253445d35fe5c92b07`
- **コミット日時**: 2025-11-15 11:51:47 -0800
- **コミットメッセージ**: "chore: update kiro update showcount from 2 to 5 (#3457)"

### リリース情報

- **リリース日**: 2025-11-17T15:55:17Z
- **GitHub Release**: https://github.com/aws/amazon-q-developer-cli/releases/tag/v1.19.7
- **Full Changelog**: https://github.com/aws/amazon-q-developer-cli/compare/v1.19.6...v1.19.7

---

## 🔍 変更内容分析

### PR一覧（v1.19.6からv1.19.7）

| PR番号 | タイトル | 作成者 | 変更ファイル数 | 主な変更内容 |
|--------|----------|--------|---------------|-------------|
| #3433 | add update announcement | @zixlin7 | 4ファイル | Kiroアップデート告知機能の追加 |
| #3452 | update copy | @zixlin7 | 3ファイル | 告知文言の更新とUI調整 |
| #3453 | chore: version bump | @dingfeli | 3ファイル | v1.19.7へのバージョンアップ |
| #3454 | fix: announcement correction | @dingfeli | 2ファイル | 告知内容の修正 |
| #3457 | chore: update kiro update showcount from 2 to 5 | @brandonskiser | 1ファイル | 告知表示回数を2回から5回に変更 |

### 主要な変更点

#### 1. Kiroアップデート告知機能の追加（PR #3433, #3452, #3454）

**新機能**: Kiro CLIへのアップデート告知機能

**変更ファイル**:
- `crates/chat-cli/src/cli/chat/mod.rs` - 告知表示ロジック
- `crates/chat-cli/src/cli/chat/util/ui.rs` - UI表示処理
- `crates/chat-cli/src/constants.rs` - 告知文言定義
- `crates/chat-cli/src/database/mod.rs` - 表示回数管理

**告知内容**:
```
Kiro CLI is the next update of the Q CLI. Your existing Q Developer CLI workflows and subscription continue to work without any changes. You can update to Kiro CLI manually with `q update` today, or wait for the auto-update on 11/24 to apply the change. To learn more, go to kiro.dev/cli-upgrade.

Kiro CLI is licensed under, and by updating to it you agree to, the AWS Intellectual Property License (kiro.dev/license).
```

#### 2. 告知表示回数の変更（PR #3457）

**変更内容**: `KIRO_UPGRADE_MAX_SHOW_COUNT`を2から5に変更

**変更箇所**:
```rust
// 変更前
const KIRO_UPGRADE_MAX_SHOW_COUNT: i64 = 2;

// 変更後  
const KIRO_UPGRADE_MAX_SHOW_COUNT: i64 = 5;
```

**ファイル**: `crates/chat-cli/src/cli/chat/mod.rs`

#### 3. バージョン管理（PR #3453）

**変更内容**:
- `Cargo.toml`: バージョン番号をv1.19.7に更新
- `Cargo.lock`: 依存関係の更新
- `crates/chat-cli/src/cli/feed.json`: リリース情報の追加

---

## 📝 作業タスク一覧

### Phase 1: バージョン履歴更新（必須）

#### Task 1-1: バージョン履歴ドキュメント更新
- **ファイル**: `docs/03_for-community/01_updates/03_version-history-v1.13-latest.md`
- **作業内容**: v1.19.7セクションの追加
- **優先度**: 🔴 最高
- **所要時間**: 15分

**更新内容**:
```markdown
## v1.19.7 (2025-11-17)

### Kiroアップデート告知機能

#### Kiro CLIアップデート告知の追加
- Q CLIからKiro CLIへの移行を促す告知機能を追加
- 告知内容: 既存のワークフローと購読は変更なしで継続、手動更新または11/24の自動更新
- 学習リンク: kiro.dev/cli-upgrade
- ライセンス: AWS Intellectual Property License (kiro.dev/license)
- 影響範囲:
  - `constants.rs`に`kiro_upgrade_announcement()`関数追加
  - チャット起動時に告知を表示（最大5回）
  - データベースで表示回数を管理
- PR番号: #3433, #3452, #3454
- 作成者: @zixlin7, @dingfeli

#### 告知表示回数の調整
- Kiroアップデート告知の最大表示回数を2回から5回に変更
- 定数: `KIRO_UPGRADE_MAX_SHOW_COUNT` 2 → 5
- 理由: より多くのユーザーに告知を届けるため
- 影響範囲: `crates/chat-cli/src/cli/chat/mod.rs`
- PR番号: #3457
- 作成者: @brandonskiser

### バージョン管理

#### バージョンバンプ
- v1.19.7への更新
- 内部的なバージョン番号とfeed.jsonの更新
- PR番号: #3453
- 作成者: @dingfeli
```

#### Task 1-2: 変更履歴ドキュメント更新
- **ファイル**: `docs/03_for-community/01_updates/01_changelog.md`
- **作業内容**: 最新バージョン情報の更新
- **優先度**: 🔴 最高
- **所要時間**: 5分

#### Task 1-3: READMEの更新
- **ファイル**: `README.md`
- **作業内容**: 最新バージョン番号の更新
- **優先度**: 🔴 最高
- **所要時間**: 2分

**更新箇所**:
```markdown
- **最新バージョン**: v1.19.7 (2025-11-17)
```

### Phase 2: 機能ドキュメント更新（推奨）

#### Task 2-1: Kiro CLI移行情報の追加
- **ファイル**: 新規作成または既存ドキュメント更新
- **作業内容**: Kiro CLIへの移行に関する情報追加
- **優先度**: 🟡 中
- **所要時間**: 30分

**検討事項**:
- Kiro CLIとは何か
- 移行のメリット・デメリット
- 移行手順
- ライセンス変更の影響

#### Task 2-2: アップデート機能の説明更新
- **ファイル**: 関連するユーザーガイド
- **作業内容**: 告知機能の説明追加
- **優先度**: 🟡 中
- **所要時間**: 15分

### Phase 3: 検証と品質確認（必須）

#### Task 3-1: 自動化ツールによる検証
- **コマンド**: `make check-all`
- **作業内容**: 全自動チェックの実行
- **優先度**: 🔴 最高
- **所要時間**: 5分

#### Task 3-2: 手動検証
- **作業内容**: 
  - リンクの確認
  - 日付の整合性確認
  - バージョン番号の一貫性確認
- **優先度**: 🔴 最高
- **所要時間**: 10分

#### Task 3-3: 影響範囲分析
- **コマンド**: `./scripts/check-impact.sh`
- **作業内容**: 変更による影響範囲の確認
- **優先度**: 🟡 中
- **所要時間**: 5分

---

## 🎯 作業手順

### 事前準備

1. **作業環境の確認**
```bash
cd /home/katoh/projects/q-cli-docs
git status
git branch backup-$(date +%Y%m%d)
```

2. **必要ツールの確認**
```bash
make --version
./scripts/check-consistency.sh --help
```

### Phase 1実行手順

#### Step 1-1: バージョン履歴更新

```bash
# ファイルを開いて編集
vim docs/03_for-community/01_updates/03_version-history-v1.13-latest.md

# v1.19.7セクションを先頭に追加（v1.19.6の上）
# 上記の「更新内容」をコピー&ペースト
```

#### Step 1-2: 変更履歴更新

```bash
# ファイルを開いて編集  
vim docs/03_for-community/01_updates/01_changelog.md

# 最新バージョン情報を更新
```

#### Step 1-3: README更新

```bash
# ファイルを開いて編集
vim README.md

# 最新バージョン番号を検索・置換
# v1.19.6 → v1.19.7
# 2025-11-13 → 2025-11-17
```

### Phase 3実行手順

#### Step 3-1: 自動検証

```bash
# 全チェック実行
make check-all

# エラーがある場合は修正
```

#### Step 3-2: 手動検証

```bash
# 一貫性チェック
./scripts/check-consistency.sh

# コマンド構文チェック  
./scripts/check-commands.sh

# 完全性チェック
./scripts/check-completeness.py
```

---

## ✅ 完了チェックリスト

### Phase 1: バージョン履歴更新
- [ ] `03_version-history-v1.13-latest.md`にv1.19.7セクション追加
- [ ] `01_changelog.md`の最新バージョン情報更新
- [ ] `README.md`のバージョン番号更新

### Phase 2: 機能ドキュメント更新（オプション）
- [ ] Kiro CLI移行情報の追加検討
- [ ] アップデート機能説明の更新検討

### Phase 3: 検証と品質確認
- [ ] `make check-all`実行・エラー修正
- [ ] 手動検証（リンク、日付、バージョン番号）
- [ ] 影響範囲分析実行

### 最終確認
- [ ] 全ファイルの変更内容確認
- [ ] コミットメッセージ準備
- [ ] 作業記録の保存

---

## 📊 作業見積もり

| Phase | 必須/推奨 | 所要時間 | 作業内容 |
|-------|----------|----------|----------|
| Phase 1 | 必須 | 22分 | バージョン履歴・変更履歴・README更新 |
| Phase 2 | 推奨 | 45分 | 機能ドキュメント更新 |
| Phase 3 | 必須 | 20分 | 検証と品質確認 |
| **合計** | - | **42分（必須のみ）** | **87分（全て）** |

---

## 🚨 注意事項

### 重要な原則
1. **推測禁止**: 全ての情報はソースコードまたは公式リリース情報に基づく
2. **検証必須**: 変更後は必ず自動化ツールで検証
3. **品質優先**: 時間より正確性を重視

### 特記事項
- v1.19.7は主にKiro CLIアップデート告知機能の追加
- 機能的な大きな変更はなし
- 告知表示回数の調整が最終的な変更

### リスク
- Kiro CLIに関する情報が限定的
- 移行の詳細情報が不足している可能性

---

## 📚 参考資料

- [GitHub Release v1.19.7](https://github.com/aws/amazon-q-developer-cli/releases/tag/v1.19.7)
- [バージョンアップ対応ガイド](docs/05_meta/10_version-update-guide.md)
- [品質原則](docs/05_meta/04_quality-principles.md)
- [自動化ツール](docs/05_meta/05_automation-tools.md)

---

**作成者**: kiro-cli  
**最終更新**: 2025-12-14T10:01:45+09:00
